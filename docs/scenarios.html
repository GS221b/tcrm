

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Scenario modelling &mdash; Tropical Cyclone Risk Model v3.1.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing code" href="contributing.html" />
    <link rel="prev" title="Using different TC databases - source formats" href="sources.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Tropical Cyclone Risk Model
          

          
            
            <img src="../_static/GA_0.gif" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setting up the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="execution.html">Running the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Model evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Using different TC databases</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scenario simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-a-scenario">Setting up a scenario</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#track-file-requirements">Track file requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-scenario">Running the scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-arguments">Command line arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extract-time-series-data">Extract time series data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryerror"><code class="docutils literal notranslate"><span class="pre">MemoryError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to TCRM</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">License information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tropical Cyclone Risk Model</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Scenario modelling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/scenarios.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scenario-modelling">
<span id="scenariomodelling"></span><h1>Scenario modelling<a class="headerlink" href="#scenario-modelling" title="Permalink to this headline">¶</a></h1>
<p>TCRM can also be used to simulate the wind field from an individual
event. Given the track of a tropical cyclone, users can run the
<a class="reference internal" href="wind.html#module-wind" title="wind"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wind</span></code></a> module only, and generate the maximum wind swath from a
TC. The <cite>tcevent.py</cite> script enables users to efficiently run a
scenario simulation, including performing temporal interpolation of
the track positions to generate a realistic representation of the wind
field. This can be useful for exploring synthetic events in more
detail, or for analysing the wind field from an historical tropical
cyclone.</p>
<p>TCRM does not currently account for local landscape effects on wind
speed (e.g. topographic enhancement or changes in surface roughness
due to vegetation or built environments). Users should determine the
best way to include these effects for their own purposes.</p>
<p>As TCRM uses a parametric profile, the primary vortex is axisymmetric,
and asymmetry in the surface winds arises solely due to the forward
motion of the cyclone and the (uniform) surface friction. For a
complete and accurate representation of the winds from an actual
tropical cyclone, the simulated winds from TCRM should be combined
with observed maximum wind speeds in the vicinity of the cyclone using
spatial interpolation methods (e.g. kriging).</p>
<div class="section" id="setting-up-a-scenario">
<span id="scenariosetup"></span><h2>Setting up a scenario<a class="headerlink" href="#setting-up-a-scenario" title="Permalink to this headline">¶</a></h2>
<div class="section" id="track-file-requirements">
<h3>Track file requirements<a class="headerlink" href="#track-file-requirements" title="Permalink to this headline">¶</a></h3>
<p>Simulating an individual event requires details of the track of the
cyclone. As a minimum, a track file must contain the following fields:
<code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">indicator</span></code> or <code class="docutils literal notranslate"><span class="pre">tcserialno</span></code> (to uniquely identify an
event); date/time information (either as a single field, or as
individual components); latitudel; longitude; central pressure and
radius to maximum winds.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> field (or the alternatives) is required as the software
uses the same methods to read the source data for both individual
events and best-track databases that contain many events. The example
configuration below uses an <code class="docutils literal notranslate"><span class="pre">index</span></code> field, with <code class="docutils literal notranslate"><span class="pre">1</span></code> in the first
row and <code class="docutils literal notranslate"><span class="pre">0</span></code> in all subsequent rows.</p>
<p>The radius to maximum wind is required in individual events, as it
cannot be artificially generated, as is the case in the generation of
synthetic events.</p>
</div>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>Users will need to manually edit a configuration file to execute a
scenario simulation. Many of the options in the main TCRM
configuration file are not required for scenario simulation, so it is
recommended to create a reduced configuration file that contains only
the required sections and options.</p>
<p>A basic configuration file for a scenario simulation would look like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DataProcess</span><span class="p">]</span>
<span class="n">InputFile</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">csv</span>
<span class="n">Source</span> <span class="o">=</span> <span class="n">NRL</span>
<span class="n">FilterSeasons</span> <span class="o">=</span> <span class="kc">False</span>

<span class="p">[</span><span class="n">WindfieldInterface</span><span class="p">]</span>
<span class="n">Margin</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">Resolution</span> <span class="o">=</span> <span class="mf">0.02</span>
<span class="n">profileType</span> <span class="o">=</span> <span class="n">powell</span>
<span class="n">windFieldType</span> <span class="o">=</span> <span class="n">kepert</span>

<span class="p">[</span><span class="n">Timeseries</span><span class="p">]</span>
<span class="n">Extract</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">LocationFile</span> <span class="o">=</span> <span class="o">./</span><span class="nb">input</span><span class="o">/</span><span class="n">stationlist</span><span class="o">.</span><span class="n">shp</span>
<span class="n">StationID</span> <span class="o">=</span> <span class="n">WMO</span>

<span class="p">[</span><span class="n">Input</span><span class="p">]</span>
<span class="n">landmask</span> <span class="o">=</span> <span class="nb">input</span><span class="o">/</span><span class="n">landmask</span><span class="o">.</span><span class="n">nc</span>
<span class="n">mslpfile</span> <span class="o">=</span> <span class="n">MSLP</span><span class="o">/</span><span class="n">slp</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">ltm</span><span class="o">.</span><span class="n">nc</span>

<span class="p">[</span><span class="n">Output</span><span class="p">]</span>
<span class="n">Path</span> <span class="o">=</span> <span class="o">./</span><span class="n">output</span><span class="o">/</span><span class="n">scenario</span>

<span class="p">[</span><span class="n">NRL</span><span class="p">]</span>
<span class="n">Columns</span> <span class="o">=</span> <span class="n">index</span><span class="p">,</span><span class="n">skip</span><span class="p">,</span><span class="n">skip</span><span class="p">,</span><span class="n">date</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="n">skip</span><span class="p">,</span><span class="n">skip</span><span class="p">,</span><span class="n">pressure</span><span class="p">,</span><span class="n">rmax</span>
<span class="n">FieldDelimiter</span> <span class="o">=</span> <span class="p">,</span>
<span class="n">NumberOfHeadingLines</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">PressureUnits</span> <span class="o">=</span> <span class="n">hPa</span>
<span class="n">SpeedUnits</span> <span class="o">=</span> <span class="n">kts</span>
<span class="n">LengthUnits</span> <span class="o">=</span> <span class="n">km</span>
<span class="n">DateFormat</span> <span class="o">=</span> <span class="o">%</span><span class="n">Y</span><span class="o">%</span><span class="n">m</span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">H</span><span class="p">:</span><span class="o">%</span><span class="n">M</span>

<span class="p">[</span><span class="n">Logging</span><span class="p">]</span>
<span class="n">LogFile</span> <span class="o">=</span> <span class="n">output</span><span class="o">/</span><span class="n">scenario</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">scenario</span><span class="o">.</span><span class="n">log</span>
<span class="n">LogLevel</span> <span class="o">=</span> <span class="n">INFO</span>
<span class="n">Verbose</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">NewLog</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">DateStamp</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-the-scenario">
<span id="runningscenario"></span><h2>Running the scenario<a class="headerlink" href="#running-the-scenario" title="Permalink to this headline">¶</a></h2>
<p>The <cite>tcevent.py</cite> script loads the track file, performs the temporal
interpolation and then passes the interpolated track file to the
<a class="reference internal" href="wind.html#module-wind" title="wind"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wind</span></code></a> module. Since the <code class="docutils literal notranslate"><span class="pre">Region</span></code> section has been removed, the
<a class="reference internal" href="wind.html#wind.run" title="wind.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wind.run()</span></code></a> method will set the grid domain to cover the entire
extent of the track.</p>
<p>Make sure <code class="docutils literal notranslate"><span class="pre">python</span></code> is in your system path, then from the base
directory, call the <code class="docutils literal notranslate"><span class="pre">tcevent.py</span></code> script, with the configuration
file option included. For example, to run the example scenario:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">tcevent</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">c</span> <span class="n">example</span><span class="o">/</span><span class="n">scenario</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">-v</span></code> option is included, then all logging messages will be
printed to the console. The level of logging detail is set in the
configuration file.</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p><cite>tcevent.py</cite> cannot be executed in parallel.</p>
</dd>
</dl>
</div>
<div class="section" id="command-line-arguments">
<span id="scenariocmdlineargs"></span><h2>Command line arguments<a class="headerlink" href="#command-line-arguments" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">-c <var>file</var></span>, <span class="option">--config <var>file</var></span></kbd></dt>
<dd><p>Path to a configuration file.</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>If given, logging messages will be printed
to the console.</p>
</dd>
<dt><kbd><span class="option">-d</span>, <span class="option">--debug</span></kbd></dt>
<dd><p>In the case that execution results in an exception,
allow the Python stack to call into the stack trace
(through implementation of a custom hook script) and
start the Python debugger (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code>).</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="extract-time-series-data">
<span id="timeseries"></span><h2>Extract time series data<a class="headerlink" href="#extract-time-series-data" title="Permalink to this headline">¶</a></h2>
<p>When running a scenario, it is possible to extract a time series of
the wind speed and sea level pressure values from the grid at selected
locations. The locations are defined in a user-supplied point shape
file (a location database is planned for inclusion in future
versions to better facilitate this feature). The shape file should
contain a field with a unique identifier, otherwise station output is
numbered sequentially through the locations.</p>
<ul class="simple">
<li><p>Locations must be provided in geographic coordinates (longitude,
latitude coordinates). No reprojection is performed.</p></li>
<li><p>Output is a ‘regional’ wind speed – that is, the wind speed at that
location, excluding local topographic or landscape effects. These
effects can be incorporated offline (i.e. outside the TCRM
framework).</p></li>
</ul>
<p>The data is stored in a separate csv file for each location, and data
is plotted on a simple figure for visual inspection.</p>
<div class="align-center figure" id="id1">
<img alt="Maximum wind speed swath of Typhoon *Haiyan*" src="../_images/maxwind_example.png" />
<p class="caption"><span class="caption-text">Estimated maximum wind speed swath of Super Typhoon
<em>Haiyan</em> (2013) across the Philippine archipelago. This simulation
used the best track estimate from the Joint Typhoon Warning Center
to establish the intensity and radius to maximum winds of the
typhoon. No attempt is made to fit the radial profile to defined
wind radii (e.g. radius of 46-, 50- or 34-knots).</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="align-center figure" id="id2">
<img alt="Time series example from Guiuan, Philippines" src="../_images/timeseries_example.png" />
<p class="caption"><span class="caption-text">Time series data for Super Typhoon <em>Haiyan</em> at Guiuan, Samar, Philippines.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>The double labels on the secondary (right-hand) y-axis require
Matplotlib version 1.3 or later.</p>
</dd>
</dl>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>Some common errors when running a scenario.</p>
<div class="section" id="memoryerror">
<h3><code class="docutils literal notranslate"><span class="pre">MemoryError</span></code><a class="headerlink" href="#memoryerror" title="Permalink to this headline">¶</a></h3>
<p>In isolated cases, <code class="docutils literal notranslate"><span class="pre">tcevent.py</span></code> may fail and report a message that
ends with <code class="docutils literal notranslate"><span class="pre">MemoryError</span></code>. This arises when the size of arrays in
Python exceed 2GB (on 32-bit systems). Conditions that lead to this
error are not clear. To resolve the problem, it is recommended to
reduce the domain of the wind field by adding a <code class="docutils literal notranslate"><span class="pre">Region</span></code> section to
the configuration file.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Region</span><span class="p">]</span>
<span class="n">gridLimit</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;xMin&#39;</span><span class="p">:</span><span class="mf">118.</span><span class="p">,</span> <span class="s1">&#39;xMax&#39;</span><span class="p">:</span><span class="mf">122.</span><span class="p">,</span> <span class="s1">&#39;yMin&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">23.</span><span class="p">,</span> <span class="s1">&#39;yMax&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">17.</span><span class="p">}</span>
</pre></div>
</div>
<p>This will restrict calculation of the wind field to the defined
domain. The <code class="docutils literal notranslate"><span class="pre">gridLimit</span></code> value is described in the
<a class="reference internal" href="setup.html#configureregion"><span class="std std-ref">Region</span></a> section.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contributing code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sources.html" class="btn btn-neutral float-left" title="Using different TC databases - source formats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Commonwealth of Australia (Geoscience Australia) 2020
      <span class="lastupdated">
        Last updated on Nov 02, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>