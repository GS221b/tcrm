

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilities package &mdash; Tropical Cyclone Risk Model v3.1.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Tropical Cyclone Risk Model
          

          
            
            <img src="../_static/GA_0.gif" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setting up the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="execution.html">Running the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Model evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Using different TC databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="scenarios.html">Scenario simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to TCRM</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">License information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tropical Cyclone Risk Model</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Utilities package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/Utilities.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilities-package">
<h1>Utilities package<a class="headerlink" href="#utilities-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-Utilities">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-Utilities" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-Utilities.Intersections">
<span id="utilities-intersections-module"></span><h2>Utilities.Intersections module<a class="headerlink" href="#module-Utilities.Intersections" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-Intersections">
<span id="intersections-determine-line-intersections-for-polygons-and-lines"></span><h3><a class="reference internal" href="#module-Intersections" title="Intersections: Functions to determine line intersections for polygons and line features."><code class="xref py py-mod docutils literal notranslate"><span class="pre">Intersections</span></code></a> – determine line intersections for polygons and lines<a class="headerlink" href="#module-Intersections" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="Utilities.Intersections.Crossings">
<em class="property">class </em><code class="sig-name descname">Crossings</code><a class="headerlink" href="#Utilities.Intersections.Crossings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Determine if a a line intersects some other geometric feature
(another line, a circle, a polygon).</p>
<dl class="py method">
<dt id="Utilities.Intersections.Crossings.CircleLine">
<code class="sig-name descname">CircleLine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">c</span></em>, <em class="sig-param"><span class="n">r</span></em>, <em class="sig-param"><span class="n">a1</span></em>, <em class="sig-param"><span class="n">a2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Crossings.CircleLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the intersection points of a circle and a line segment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> – <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> object describing the centre of the circle.</p></li>
<li><p><strong>r</strong> – Eadius of the circle in map units.</p></li>
<li><p><strong>a1</strong> – <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> object describing the start of the line segment.</p></li>
<li><p><strong>a2</strong> – <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> object describing the end of the line segment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#Utilities.Intersections.Intersection" title="Utilities.Intersections.Intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a> object with the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Intersection.status</span></code> updated. “Inside” means the line
segment is wholly contained within the circle; “Outside”
means the line segment is wholly outside the circle;
“Intersection” means the line intersects the circle. In this
final case, the <code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code> attribute of the
<a class="reference internal" href="#Utilities.Intersections.Intersection" title="Utilities.Intersections.Intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a> object is populated with a
<a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> object of the location of the intersection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.Intersections.Crossings.CirclePolygon">
<code class="sig-name descname">CirclePolygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">c</span></em>, <em class="sig-param"><span class="n">r</span></em>, <em class="sig-param"><span class="n">points</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Crossings.CirclePolygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the intersection points of a circle and a polygon.
Uses <a class="reference internal" href="#Utilities.Intersections.Crossings.CircleLine" title="Utilities.Intersections.Crossings.CircleLine"><code class="xref py py-func docutils literal notranslate"><span class="pre">Crossings.CircleLine()</span></code></a> on each line segment in the
polygon to determine if the two features intersect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> – <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> representing the centre of the circle.</p></li>
<li><p><strong>r</strong> – Radius of the circle in map units.</p></li>
</ul>
</dd>
<dt class="field-even">Paran points</dt>
<dd class="field-even"><p>Array of <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> objects representing the
polygon.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#Utilities.Intersections.Intersection" title="Utilities.Intersections.Intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a> object with updated status and points
attributes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.Intersections.Crossings.LineLine">
<code class="sig-name descname">LineLine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a1</span></em>, <em class="sig-param"><span class="n">a2</span></em>, <em class="sig-param"><span class="n">b1</span></em>, <em class="sig-param"><span class="n">b2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Crossings.LineLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if two line segments intersect.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a1</strong> – Starting <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> of line 1.</p></li>
<li><p><strong>a2</strong> – Ending <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> of line 1.</p></li>
<li><p><strong>b1</strong> – Starting <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> of line 2.</p></li>
<li><p><strong>b2</strong> – Ending <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> of line 2.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#Utilities.Intersections.Intersection" title="Utilities.Intersections.Intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a> object with <code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code> set to
<code class="docutils literal notranslate"><span class="pre">Intersection</span></code> if the lines intersect, <code class="docutils literal notranslate"><span class="pre">Coincident</span></code>
if the lines overlap, <code class="docutils literal notranslate"><span class="pre">Parallel</span></code> if the lines are
parallel or <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">Intersection</span></code> if the lines do not
intersect. If the lines intersect, then the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">points</span></code> attribute is set to the location of the
intersection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.Intersections.Crossings.LinePolygon">
<code class="sig-name descname">LinePolygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a1</span></em>, <em class="sig-param"><span class="n">a2</span></em>, <em class="sig-param"><span class="n">points</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Crossings.LinePolygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a line intersects a polygon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a1</strong> – Starting <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> of the line.</p></li>
<li><p><strong>a2</strong> – Ending <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> of the line.</p></li>
<li><p><strong>points</strong> – Collection of <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> objects that
represent the vertices of a polygon.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.Intersections.Crossings.lerp">
<code class="sig-name descname">lerp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a1</span></em>, <em class="sig-param"><span class="n">a2</span></em>, <em class="sig-param"><span class="n">u</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Crossings.lerp" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear interpolation between two points:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a1</strong> – First <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a>.</p></li>
<li><p><strong>a2</strong> – Second <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a>.</p></li>
<li><p><strong>u</strong> – Fractional distance along the line between the two points.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coordinates of the interpolated point as a tuple.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="Utilities.Intersections.Intersection">
<em class="property">class </em><code class="sig-name descname">Intersection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">state</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An Intersection object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>str</em>) – Initial state of the <a class="reference internal" href="#Utilities.Intersections.Intersection" title="Utilities.Intersections.Intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a> (default <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
</dd>
</dl>
<p>Parameters: None
Members: status (string) and points (list)
Methods: None
Internal Methods: None</p>
</dd></dl>

<dl class="py class">
<dt id="Utilities.Intersections.Point">
<em class="property">class </em><code class="sig-name descname">Point</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Point" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class representation for a Point
Contains x and y members
Created by Geoff Xu, 2006</p>
<dl class="py method">
<dt id="Utilities.Intersections.Point.getX">
<code class="sig-name descname">getX</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Point.getX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.Intersections.Point.getY">
<code class="sig-name descname">getY</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.Point.getY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="Utilities.Intersections.convert2vertex">
<code class="sig-name descname">convert2vertex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a1</span></em>, <em class="sig-param"><span class="n">a2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.convert2vertex" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts 2 1D arrays into a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Points</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a1</strong> – ordinate</p></li>
<li><p><strong>a2</strong> – abscissa</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.Intersections.inLand">
<code class="sig-name descname">inLand</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">P</span></em>, <em class="sig-param"><span class="n">V</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.Intersections.inLand" title="Permalink to this definition">¶</a></dt>
<dd><p>Test to see if a point is within the list of vertices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> – <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> object.</p></li>
<li><p><strong>V</strong> – List of <a class="reference internal" href="#Utilities.Intersections.Point" title="Utilities.Intersections.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> objects that represent vertices of
the shape to be tested. Must be a closed set.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the point lies inside the vertices, <code class="docutils literal notranslate"><span class="pre">False</span></code>
otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.colours">
<span id="utilities-colours-module"></span><h2>Utilities.colours module<a class="headerlink" href="#module-Utilities.colours" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-colours">
<span id="colours-add-custom-colour-scales"></span><h3><a class="reference internal" href="#module-colours" title="colours: Create customised colour maps that are more palatable and/or suitable for plotting data. To access the additional colour maps, simply import this module, then call pyplot.get_cmap(&lt;new_cmap_name&gt;) to get the new colour map. See the matplotlib examples pages for more details: http://matplotlib.org/examples/pylab_examples/custom_cmap.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">colours</span></code></a> - add custom colour scales<a class="headerlink" href="#module-colours" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="module-Utilities.columns">
<span id="utilities-columns-module"></span><h2>Utilities.columns module<a class="headerlink" href="#module-Utilities.columns" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-columns">
<span id="columns-load-delimited-data-files"></span><h3><a class="reference internal" href="#module-columns" title="columns: Load csv formatted data into a numpy array"><code class="xref py py-mod docutils literal notranslate"><span class="pre">columns</span></code></a> – load delimited data files<a class="headerlink" href="#module-columns" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.columns.colReadCSV">
<code class="sig-name descname">colReadCSV</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">configFile</span></em>, <em class="sig-param"><span class="n">dataFile</span></em>, <em class="sig-param"><span class="n">source</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.columns.colReadCSV" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a csv file containing ‘column’ data into a record (numpy)
array with columns labelled by ‘fields’. There must be a section in
the <code class="docutils literal notranslate"><span class="pre">configFile</span></code> named <code class="docutils literal notranslate"><span class="pre">source</span></code> that sets out the format of the
data file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configFile</strong> (<em>str</em>) – Path to a configuration file that holds details
of the input data.</p></li>
<li><p><strong>dataFile</strong> (<em>str</em>) – Path to the input file to load.</p></li>
<li><p><strong>source</strong> (<em>str</em>) – Name of the source format. There must be a
corresponding section in the <code class="docutils literal notranslate"><span class="pre">configFile</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> that contains the input data.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.config">
<span id="utilities-config-module"></span><h2>Utilities.config module<a class="headerlink" href="#module-Utilities.config" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-config">
<span id="config-reading-configuration-files"></span><h3><a class="reference internal" href="#module-config" title="config: Provides functions for manipulating configuration files e.g. reading setting from a configuration file."><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span></code></a> – reading configuration files<a class="headerlink" href="#module-config" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.config.ConfigParser">
<code class="sig-name descname">ConfigParser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.config.ConfigParser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="Utilities.config.cnfGetIniValue">
<code class="sig-name descname">cnfGetIniValue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">configFile</span></em>, <em class="sig-param"><span class="n">section</span></em>, <em class="sig-param"><span class="n">option</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.config.cnfGetIniValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to interface with code that uses the
old config parser.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configFile</strong> (<em>str</em>) – path to the configuration file to read.</p></li>
<li><p><strong>section</strong> (<em>str</em>) – Section name to read.</p></li>
<li><p><strong>option</strong> (<em>str</em>) – Option name to read.</p></li>
<li><p><strong>default</strong> – Optional default value to use if the section/option
pair is not present in the file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Value recorded in the section/option of the config file, if
present; the default value otherwise (if defined).</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NoSectionError</strong><strong>, </strong><strong>NoOptionError</strong> – if the section/option is not
defined, and no default value given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.config.formatList">
<code class="sig-name descname">formatList</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lst</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.config.formatList" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list into a comma-joined string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lst</strong> (<em>list</em>) – Input list to join.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string comprised of the list elements joined by commas.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.config.parseBool">
<code class="sig-name descname">parseBool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">txt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.config.parseBool" title="Permalink to this definition">¶</a></dt>
<dd><p>Parser for boolean options</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>txt</strong> (<em>str</em>) – String from config file to parse.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the string is ‘True’, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.config.parseList">
<code class="sig-name descname">parseList</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">txt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.config.parseList" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a comma-separated line into a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>txt</strong> (<em>str</em>) – String from config file to parse.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List, based on the input string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.config.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.config.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-instantiate ConfigParser (only for use in tests)</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.confjson">
<span id="utilities-confjson-module"></span><h2>Utilities.confjson module<a class="headerlink" href="#module-Utilities.confjson" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="Utilities.confjson.StrictConfigParser">
<em class="property">class </em><code class="sig-name descname">StrictConfigParser</code><span class="sig-paren">(</span><em class="sig-param">defaults=None</em>, <em class="sig-param">dict_type=&lt;class 'collections.OrderedDict'&gt;</em>, <em class="sig-param">allow_no_value=False</em>, <em class="sig-param">*</em>, <em class="sig-param">delimiters=('='</em>, <em class="sig-param">':')</em>, <em class="sig-param">comment_prefixes=('#'</em>, <em class="sig-param">';')</em>, <em class="sig-param">inline_comment_prefixes=None</em>, <em class="sig-param">strict=True</em>, <em class="sig-param">empty_lines_in_values=True</em>, <em class="sig-param">default_section='DEFAULT'</em>, <em class="sig-param">interpolation=&lt;object object&gt;</em>, <em class="sig-param">converters=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.confjson.StrictConfigParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.ConfigParser</span></code></p>
<dl class="py method">
<dt id="Utilities.confjson.StrictConfigParser.dget">
<code class="sig-name descname">dget</code><span class="sig-paren">(</span><em class="sig-param">section</em>, <em class="sig-param">option</em>, <em class="sig-param">default=None</em>, <em class="sig-param">type=&lt;class 'str'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.confjson.StrictConfigParser.dget" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="Utilities.confjson.flatten">
<code class="sig-name descname">flatten</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.confjson.flatten" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-Utilities.convolve">
<span id="utilities-convolve-module"></span><h2>Utilities.convolve module<a class="headerlink" href="#module-Utilities.convolve" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-convolve">
<span id="convolve-convolve-two-2-d-fields"></span><h3><a class="reference internal" href="#module-convolve" title="convolve: Convolve two 2-d fields to apply a smoother (e.g. directional filtering, gaussian smoother)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">convolve</span></code></a> – convolve two 2-d fields<a class="headerlink" href="#module-convolve" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.convolve.convolve">
<code class="sig-name descname">convolve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">im</span></em>, <em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">mtype</span><span class="o">=</span><span class="default_value">'terrain'</span></em>, <em class="sig-param"><span class="n">res</span><span class="o">=</span><span class="default_value">25.0</span></em>, <em class="sig-param"><span class="n">height</span><span class="o">=</span><span class="default_value">5.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.convolve.convolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooth a 2D array im by convolving with a kernel of size n.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – 2-d array of values to be smoothed.</p></li>
<li><p><strong>dir</strong> (<em>str</em>) – One of ‘N’,’NE’,’E’,’SE’,’S’,’SW’,’W’,’NW’ to define the
direction of the site multiplier to evaluate.</p></li>
<li><p><strong>mtype</strong> (<em>str</em>) – Model type = either “terrain” or “shield”.</p></li>
<li><p><strong>res</strong> (<em>float</em>) – Resolution of the input grid dataset.</p></li>
<li><p><strong>height</strong> (<em>float</em>) – nominal height of the buildings to be used in
evaluating the shielding multiplier.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-d array of convolved data (convolved with the appropriate
kernel). The output array is the same size as the input array,
with boundary values set to be filled to a value of 1.0</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.convolve.getKernel">
<code class="sig-name descname">getKernel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">mtype</span></em>, <em class="sig-param"><span class="n">res</span><span class="o">=</span><span class="default_value">25.0</span></em>, <em class="sig-param"><span class="n">height</span><span class="o">=</span><span class="default_value">5.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.convolve.getKernel" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an appropriate kernel for smoothing the data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>str</em>) – Wind direction - one of [‘N’,’NE’,’E’,’SE’,’S’,’SW’,’W’,’NW’]</p></li>
<li><p><strong>m</strong> (<em>str</em>) – Multiplier type - either ‘terrain’ or ‘shield’</p></li>
<li><p><strong>res</strong> (<em>float</em>) – Resolution of the dataset (in metres) (default is 25)</p></li>
<li><p><strong>height</strong> (<em>float</em>) – Nominal height of buildings, for use in evaluating the
shielding multiplier (default is 5)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>kernel to apply to the raw multiplier values to generate
directional multiplier values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2-d <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.datasets">
<span id="utilities-datasets-module"></span><h2>Utilities.datasets module<a class="headerlink" href="#module-Utilities.datasets" title="Permalink to this headline">¶</a></h2>
<div class="section" id="datasets-manage-downloaded-datasets">
<h3><code class="xref py py-mod docutils literal notranslate"><span class="pre">datasets</span></code> – manage downloaded datasets<a class="headerlink" href="#datasets-manage-downloaded-datasets" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="Utilities.datasets.DataSet">
<em class="property">class </em><code class="sig-name descname">DataSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.datasets.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Download a dataset from a url, store in a specified path with a
given filename.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the dataset to be downloaded.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL of the dataset.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – path name for the storage location of the dataset</p></li>
<li><p><strong>filename</strong> (<em>str</em><em> or </em><em>None</em>) – name of the file to be saved (can be different from
the name of the dataset).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="Utilities.datasets.DataSet.download">
<code class="sig-name descname">download</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">callback</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.datasets.DataSet.download" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the download of the dataset. If the dataset
has already been downloaded (the <a class="reference internal" href="#Utilities.datasets.DataSet.isDownloaded" title="Utilities.datasets.DataSet.isDownloaded"><code class="xref py py-attr docutils literal notranslate"><span class="pre">isDownloaded</span></code></a> will be set
to True), then don’t try to download.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> (<em>function</em>) – Callback function (for reporting status to STDOUT).</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>IOError</strong> – Unable to download the dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.datasets.DataSet.isDownloaded">
<code class="sig-name descname">isDownloaded</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.datasets.DataSet.isDownloaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a file has already been downloaded</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>True</cite> if the file exists, <cite>False</cite> otherwise.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="Utilities.datasets.checkAndDownload">
<code class="sig-name descname">checkAndDownload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">callback</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.datasets.checkAndDownload" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the <code class="xref py py-data docutils literal notranslate"><span class="pre">DATASETS</span></code> list and download each, if it
has not previously been downoladed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> (<em>function</em>) – Callback function (for reporting status to STDOUT).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.datasets.loadDatasets">
<code class="sig-name descname">loadDatasets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">configFile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.datasets.loadDatasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the details of the datasets to be downloaded from the
configuration settings. This updates the <code class="xref py py-data docutils literal notranslate"><span class="pre">DATASETS</span></code>
list.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.files">
<span id="utilities-files-module"></span><h2>Utilities.files module<a class="headerlink" href="#module-Utilities.files" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt id="Utilities.files.WindowsError">
<em class="property">exception </em><code class="sig-name descname">WindowsError</code><a class="headerlink" href="#Utilities.files.WindowsError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OSError</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flConfigFile">
<code class="sig-name descname">flConfigFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extension</span><span class="o">=</span><span class="default_value">'.ini'</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flConfigFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a configuration filename (default extension .ini) based on the
name and path of the function/module calling this function. Can also
be useful for setting log file names automatically.
If prefix is passed, this is preprended to the filename.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extension</strong> (<em>str</em>) – file extension to use (default ‘.ini’). The
period (‘.’) must be included.</p></li>
<li><p><strong>prefix</strong> (<em>str</em>) – Optional prefix to the filename (default ‘’).</p></li>
<li><p><strong>level</strong> – Optional level in the stack of the main script
(default = maximum level in the stack).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Full path of calling function/module, with the source file’s
extension replaced with extension, and optionally prefix
inserted after the last path separator.</p>
</dd>
</dl>
<p>Example: configFile = flConfigFile(‘.ini’)
Calling flConfigFile from /foo/bar/baz.py should return /foo/bar/baz.ini</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flGetStat">
<code class="sig-name descname">flGetStat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">CHUNK</span><span class="o">=</span><span class="default_value">65536</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flGetStat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get basic statistics of filename - namely directory, name (excluding
base path), md5sum and the last modified date. Useful for checking
if a file has previously been processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Filename to check.</p></li>
<li><p><strong>CHUNK</strong> (<em>int</em>) – (optional) chunk size (for md5sum calculation).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path, name, md5sum, modification date for the file.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if the input file is not a string.</p></li>
<li><p><strong>IOError</strong> – if the file is not a valid file, or if the file
cannot be opened.</p></li>
</ul>
</dd>
</dl>
<p>Example: dir, name, md5sum, moddate = flGetStat(filename)</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flLoadFile">
<code class="sig-name descname">flLoadFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">comments</span><span class="o">=</span><span class="default_value">'%'</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">','</span></em>, <em class="sig-param"><span class="n">skiprows</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flLoadFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a delimited text file – uses <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.genfromtxt()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>file</em><em> or </em><em>str</em>) – File, filename, or generator to read</p></li>
<li><p><strong>comments</strong> (<em>str</em><em>, </em><em>optional</em>) – (default ‘%’) indicator</p></li>
<li><p><strong>delimiter</strong> (<em>str</em><em>, </em><em>int</em><em> or </em><em>sequence</em><em>, </em><em>optional</em>) – The string used to separate values.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flLogFatalError">
<code class="sig-name descname">flLogFatalError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tblines</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flLogFatalError" title="Permalink to this definition">¶</a></dt>
<dd><p>Log the error messages normally reported in a traceback so that
all error messages can be caught, then exit. The input ‘tblines’
is created by calling <code class="docutils literal notranslate"><span class="pre">traceback.format_exc().splitlines()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tblines</strong> (<em>list</em>) – List of lines from the traceback.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flModDate">
<code class="sig-name descname">flModDate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">dateformat</span><span class="o">=</span><span class="default_value">'%Y-%m-%d %H:%M:%S'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flModDate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last modified date of the input file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – file name (full path).</p></li>
<li><p><strong>dateformat</strong> (<em>str</em>) – Format string for the date (default
‘%Y-%m-%d %H:%M:%S’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File modification date/time as a string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p>Example: modDate = flModDate( ‘C:/foo/bar.csv’ , dateformat=’%Y-%m-%dT%H:%M:%S’ )</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flModuleName">
<code class="sig-name descname">flModuleName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flModuleName" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of the module &lt;level&gt; levels above this function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<em>int</em>) – Level in the stack of the module calling this function
(default = 1, function calling <code class="docutils literal notranslate"><span class="pre">flModuleName</span></code>)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Module name.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p>Example: mymodule = flModuleName( )
Calling flModuleName() from “/foo/bar/baz.py” returns “baz”</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flModulePath">
<code class="sig-name descname">flModulePath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flModulePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path of the module &lt;level&gt; levels above this function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<em>int</em>) – level in the stack of the module calling this function
(default = 1, function calling <code class="docutils literal notranslate"><span class="pre">flModulePath</span></code>)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path, basename and extension of the file containing the module</p>
</dd>
</dl>
<p>Example: path, base, ext = flModulePath( )
Calling flModulePath() from “/foo/bar/baz.py” produces the result
“/foo/bar”, “baz”, “.py”</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flProgramVersion">
<code class="sig-name descname">flProgramVersion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flProgramVersion" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the __version__ string from the top-level program, where defined.</p>
<p>If it is not defined, return an empty string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<em>int</em>) – level in the stack of the main script
(default = maximum level in the stack)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>version string (defined as the <code class="docutils literal notranslate"><span class="pre">__version__</span></code> global variable)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flSaveFile">
<code class="sig-name descname">flSaveFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">header</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">','</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">'%.18e'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flSaveFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Save data to a file.</p>
<p>Does some basic checks to ensure the path exists before attempting
to write the file. Uses <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.savetxt</span></code> to save the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Path to the destination file.</p></li>
<li><p><strong>data</strong> – Array data to be written to file.</p></li>
<li><p><strong>header</strong> (<em>str</em>) – Column headers (optional).</p></li>
<li><p><strong>delimiter</strong> (<em>str</em>) – Field delimiter (default ‘,’).</p></li>
<li><p><strong>fmt</strong> (<em>str</em>) – Format statement for writing the data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flSize">
<code class="sig-name descname">flSize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the size of the input file in bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Full path to the file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File size in bytes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<p>Example: file_size = flSize( ‘C:/foo/bar.csv’ )</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.files.flStartLog">
<code class="sig-name descname">flStartLog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logFile</span></em>, <em class="sig-param"><span class="n">logLevel</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">datestamp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">newlog</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.files.flStartLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Start logging to logFile all messages of logLevel and higher.
Setting <code class="docutils literal notranslate"><span class="pre">verbose=True</span></code> will report all messages to STDOUT as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logFile</strong> (<em>str</em>) – Full path to log file.</p></li>
<li><p><strong>logLevel</strong> (<em>str</em>) – String specifiying one of the standard Python logging
levels (‘NOTSET’,’DEBUG’,’INFO’,’WARNING’,’ERROR’,
‘CRITICAL’)</p></li>
<li><p><strong>verbose</strong> (<em>boolean</em>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> will echo all logging calls to STDOUT</p></li>
<li><p><strong>datestamp</strong> (<em>boolean</em>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> will include a timestamp of the creation
time in the filename.</p></li>
<li><p><strong>newlog</strong> (<em>boolean</em>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> will create a new log file each time this
function is called. <code class="docutils literal notranslate"><span class="pre">False</span></code> will append to the
existing file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.logger</span></code> object.</p>
</dd>
</dl>
<p>Example: flStartLog(‘/home/user/log/app.log’, ‘INFO’, verbose=True)</p>
</dd></dl>

</div>
<div class="section" id="module-Utilities.grid">
<span id="utilities-grid-module"></span><h2>Utilities.grid module<a class="headerlink" href="#module-Utilities.grid" title="Permalink to this headline">¶</a></h2>
<div class="section" id="grid-read-write-and-sample-ascii-grid-files">
<h3><a class="reference internal" href="#module-grid" title="grid: Read, write and sample ascii grid files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">grid</span></code></a> – read, write and sample ascii grid files<a class="headerlink" href="#grid-read-write-and-sample-ascii-grid-files" title="Permalink to this headline">¶</a></h3>
<p>Provide functions to read, write and sample ascii grid files. The
ascii files are assumend to have and ArcGIS GIRD format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ncols</span>        <span class="n">nx</span>
<span class="n">nrows</span>        <span class="n">ny</span>
<span class="n">xllcorner</span>    <span class="n">xll</span>
<span class="n">yllcorner</span>    <span class="n">yll</span>
<span class="n">cellsize</span>     <span class="n">dx</span>
<span class="n">NODATA_value</span> <span class="o">-</span><span class="mi">9999</span>
<span class="n">data</span> <span class="n">data</span> <span class="n">data</span> <span class="o">...</span>
 <span class="p">:</span>    <span class="p">:</span>    <span class="p">:</span>
 <span class="p">:</span>    <span class="p">:</span>    <span class="p">:</span>
</pre></div>
</div>
<span class="target" id="module-grid"></span><dl class="py class">
<dt id="Utilities.grid.SampleGrid">
<em class="property">class </em><code class="sig-name descname">SampleGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.grid.SampleGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Sample data from a gridded data file. The class is instantiated
with a gridded data file (either an ascii file or a netcdf file
with single 2-d variable), and the <a class="reference internal" href="#Utilities.grid.SampleGrid.sampleGrid" title="Utilities.grid.SampleGrid.sampleGrid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SampleGrid.sampleGrid()</span></code></a>
method returns the value of the grid point closest to the given
longitude and latitude.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to a file containing gridded data.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">SampleGrid</span><span class="p">(</span> <span class="s1">&#39;/foo/bar/grid.nc&#39;</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">sampleGrid</span><span class="p">(</span> <span class="mf">100.</span><span class="p">,</span> <span class="o">-</span><span class="mf">25.</span> <span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="Utilities.grid.SampleGrid.sampleGrid">
<code class="sig-name descname">sampleGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.grid.SampleGrid.sampleGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample a value from the grid at the given cLon, cLat
At this time, does not interplolate from the input grid to the
given location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lon</strong> (<em>float</em>) – Longitude of the point to sample.</p></li>
<li><p><strong>lat</strong> (<em>float</em>) – Latitude of the point to sample.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Value of the nearest grid point to the given lon/lat point.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="Utilities.grid.grdRead">
<code class="sig-name descname">grdRead</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.grid.grdRead" title="Permalink to this definition">¶</a></dt>
<dd><p>Read formatted data from an ascii grid format file.
Returns the longitude and latitude of the grid and the data values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Path to an ascii grid format or netcdf file.</p></li>
<li><p><strong>delimiter</strong> – Delimiter for the ascii format file (optional).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>longitude, latitude, data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
<p>Usage:
longitude, latitude, data = grdRead(filename, [delimiter])</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.grid.grdReadFromNetcdf">
<code class="sig-name descname">grdReadFromNetcdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.grid.grdReadFromNetcdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Read formatted data from a netcdf file.
Returns the longitude and latitude of the grid and the data
values. Assumes that there is only one (non-coordinate) variable
in the file, which is only 2 dimensional.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to a netcdf file to read.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>longitude, latitude and grid data.</p>
</dd>
</dl>
<p>Usage:
longitude, latitude, data = grdReadFromNetcdf(filename)</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.grid.grdSave">
<code class="sig-name descname">grdSave</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">delta</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">' '</span></em>, <em class="sig-param"><span class="n">nodata</span><span class="o">=</span><span class="default_value">- 9999</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">'%.10e'</span></em>, <em class="sig-param"><span class="n">coords</span><span class="o">=</span><span class="default_value">'latlon'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.grid.grdSave" title="Permalink to this definition">¶</a></dt>
<dd><p>Save formatted data to an ascii grid format file.
The files have 6 header lines describing the data, followed by the
data in a gridded format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Path to the file to be written.</p></li>
<li><p><strong>data</strong> – 2-d array of data values to store.</p></li>
<li><p><strong>lon</strong> – Array of longitudes corresponding to data points.</p></li>
<li><p><strong>lat</strong> – Array of latitudes corresponding to data points.</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – Spacing between grid points.</p></li>
<li><p><strong>delimiter</strong> (<em>str</em>) – Delimiter to put between data points (default ‘ ‘).</p></li>
<li><p><strong>nodata</strong> (<em>float</em>) – Value to indicate missing values (default -9999).</p></li>
<li><p><strong>fmt</strong> (<em>str</em>) – String format statement.</p></li>
<li><p><strong>coords</strong> (<em>str</em>) – Optionally store the data in UTM
coordinates. Default is to store the data in
geographic coordinates (<code class="docutils literal notranslate"><span class="pre">coords='latlon'</span></code>).
If <code class="docutils literal notranslate"><span class="pre">coords='UTM'</span></code>, then the latitude &amp;
longitudes are converted to the local UTM
coordinate system.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <code class="docutils literal notranslate"><span class="pre">filename</span></code> is not a string of file handle.</p>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grdSave</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span>
<span class="go">            nodata=-9999, fmt=&#39;%.10e, coords=&#39;latlon&#39;)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.interp3d">
<span id="utilities-interp3d-module"></span><h2>Utilities.interp3d module<a class="headerlink" href="#module-Utilities.interp3d" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-interp3d">
<span id="interp3d-interpolate-to-a-set-of-points-in-3-dimensional-space"></span><h3><a class="reference internal" href="#module-interp3d" title="interp3d: Interpolate data to a set of points in 3-d space."><code class="xref py py-mod docutils literal notranslate"><span class="pre">interp3d</span></code></a> – interpolate to a set of points in 3-dimensional space<a class="headerlink" href="#module-interp3d" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.ndimage.interpolation.map-coordinates()</span></code> to interpolate
data in three dimensions.</p>
<dl class="py function">
<dt id="Utilities.interp3d.interp3d">
<code class="sig-name descname">interp3d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_array</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">[360.0, 180.0, 365.0]</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">[0.0, - 90.0, 0.0]</span></em>, <em class="sig-param"><span class="n">prefilter</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.interp3d.interp3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper to <code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.ndimage.interpolation.map_coordinates()</span></code>, which
converts coordinates of points to indices that correspond to the
array.  We assume that one is working with lon, lat, day data
(i.e. initially designed to work with daily long term mean sea
level pressure)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_array</strong> – A 3-d array of data at regular intervals,
representing the data to be evaluated.</p></li>
<li><p><strong>coords</strong> – A 3-by-n array of coordinates at which the data
in <code class="docutils literal notranslate"><span class="pre">input_array</span></code> will be interpolated to.</p></li>
<li><p><strong>scale</strong> (<em>list</em>) – A (list of) scale factor(s) that reduces the
<code class="docutils literal notranslate"><span class="pre">coords</span></code> values to the range of indices in
<code class="docutils literal notranslate"><span class="pre">input_array</span></code>.</p></li>
<li><p><strong>offset</strong> (<em>list</em>) – A (list of) offset factor(s) that is
subtracted from the <code class="docutils literal notranslate"><span class="pre">coords</span></code> values before
adjusting the <code class="docutils literal notranslate"><span class="pre">scale</span></code> (above).</p></li>
<li><p><strong>prefilter</strong> (<em>boolean</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> (default), then apply a spline
filter before interpolation (necessary for
spline interpolation of order &gt; 1).  If
<code class="docutils literal notranslate"><span class="pre">False</span></code>, it is assumed that the input is
already filtered. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1-d array of values corresponding to the interpolated
values at the points given in <code class="docutils literal notranslate"><span class="pre">coords</span></code>.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span> <span class="o">=</span> <span class="n">interp3d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">360.</span><span class="p">,</span> <span class="mf">180.</span><span class="p">,</span> <span class="mf">365.</span><span class="p">],</span>
<span class="gp">... </span>                <span class="n">offset</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">90.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.interpTrack">
<span id="utilities-interptrack-module"></span><h2>Utilities.interpTrack module<a class="headerlink" href="#module-Utilities.interpTrack" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-interpTrack">
<span id="interptrack-interpolate-tc-track-to-a-shorter-time-interval"></span><h3><a class="reference internal" href="#module-interpTrack" title="interpTrack: interpolate a TC track to a shorter time interval."><code class="xref py py-mod docutils literal notranslate"><span class="pre">interpTrack</span></code></a> – interpolate TC track to a shorter time interval<a class="headerlink" href="#module-interpTrack" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.interpTrack.ShowSyntax">
<code class="sig-name descname">ShowSyntax</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exit_code</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.interpTrack.ShowSyntax" title="Permalink to this definition">¶</a></dt>
<dd><p>Print basic help information on using this module as a script</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exit_code</strong> (<em>int</em>) – Exit code.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.interpTrack.interpolateTrack">
<code class="sig-name descname">interpolateTrack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">configFile</span></em>, <em class="sig-param"><span class="n">trackFile</span></em>, <em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">delta</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">interpolation_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.interpTrack.interpolateTrack" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate the data in a track file to the time interval delta hours.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configFile</strong> (<em>str</em>) – Configuration file that contains information on the
source format of the track file.</p></li>
<li><p><strong>trackFile</strong> (<em>str</em>) – Path to csv format track file.</p></li>
<li><p><strong>source</strong> (<em>str</em>) – Name of the data source. There must be a corresponding
section in the configuration file that contains the
description of the data.</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – Time interval in hours to interpolate to. Default is
0.1 hours</p></li>
<li><p><strong>interpolation_type</strong> (<em>str</em>) – Optionally use Akima or linear
interpolation for the track positions.
Default is linear 1-dimensional spline
interpolation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>10 arrays (id, time, date, lon, lat, bearing, forward speed,
central pressure, environmental pressure and radius to
maximum wind) that describe the track at <code class="docutils literal notranslate"><span class="pre">delta</span></code> hours
intervals.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.interpTrack.main">
<code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">argv</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.interpTrack.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main part of the program</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> (<em>list</em>) – List of command line arguments.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.lat_long_UTM_conversion">
<span id="utilities-lat-long-utm-conversion-module"></span><h2>Utilities.lat_long_UTM_conversion module<a class="headerlink" href="#module-Utilities.lat_long_UTM_conversion" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-lat_long_UTM_conversion">
<span id="lat-long-utm-conversion-convert-between-geographic-utm-coordinates"></span><h3><a class="reference internal" href="#module-lat_long_UTM_conversion" title="lat_long_UTM_conversion: Convert from latitude-longitude coordinates to UTM coordinates."><code class="xref py py-mod docutils literal notranslate"><span class="pre">lat_long_UTM_conversion</span></code></a> – convert between geographic &amp; UTM coordinates<a class="headerlink" href="#module-lat_long_UTM_conversion" title="Permalink to this headline">¶</a></h3>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zone</span><span class="p">,</span> <span class="n">easting</span><span class="p">,</span> <span class="n">northing</span> <span class="o">=</span> <span class="n">LLToUTM</span><span class="p">(</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">ReferenceEllipsoid</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span> <span class="o">=</span> <span class="n">UTMtoLL</span><span class="p">(</span><span class="n">northing</span><span class="p">,</span> <span class="n">easting</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span>
<span class="gp">... </span>                              <span class="n">isSouthernHemisphere</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                              <span class="n">ReferenceEllipsoid</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://www.pygps.org">http://www.pygps.org</a></p>
<dl class="py function">
<dt id="Utilities.lat_long_UTM_conversion.LLtoUTM">
<code class="sig-name descname">LLtoUTM</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">long</span></em>, <em class="sig-param"><span class="n">reference_ellipsoid</span><span class="o">=</span><span class="default_value">23</span></em>, <em class="sig-param"><span class="n">ZoneNumber</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.lat_long_UTM_conversion.LLtoUTM" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts lat/long to UTM coords.  Equations from USGS Bulletin 1532</p>
<p>Lat and long are in decimal degrees
Written by Chuck Gantz- <a class="reference external" href="mailto:chuck&#46;gantz&#37;&#52;&#48;globalstar&#46;com">chuck<span>&#46;</span>gantz<span>&#64;</span>globalstar<span>&#46;</span>com</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Lat</strong> (<em>float</em>) – Latitude. North latitudes are positive, south
latitudes are negative.</p></li>
<li><p><strong>Lon</strong> (<em>float</em>) – longitude. East longitudes are positive, west
longitudes are negative.</p></li>
<li><p><strong>reference_ellipsoid</strong> (<em>int</em>) – Reference ellipsoid for the coordinate
system (default=23 – WGS84).</p></li>
<li><p><strong>ZoneNumber</strong> (<em>str</em>) – UTM Zone for coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of (ZoneNumber, UTMEasting, UTMNorthing)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.lat_long_UTM_conversion.UTMtoLL">
<code class="sig-name descname">UTMtoLL</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">northing</span></em>, <em class="sig-param"><span class="n">easting</span></em>, <em class="sig-param"><span class="n">zone</span></em>, <em class="sig-param"><span class="n">isSouthernHemisphere</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">reference_ellipsoid</span><span class="o">=</span><span class="default_value">23</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.lat_long_UTM_conversion.UTMtoLL" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts UTM coords to lat/long.  Equations from USGS Bulletin 1532
East longitudes are positive, West longitudes are negative.
North latitudes are positive, South latitudes are negative
lat and long are in decimal degrees.
Written by Chuck Gantz- <a class="reference external" href="mailto:chuck&#46;gantz&#37;&#52;&#48;globalstar&#46;com">chuck<span>&#46;</span>gantz<span>&#64;</span>globalstar<span>&#46;</span>com</a>
Converted to Python by Russ Nelson &lt;<a class="reference external" href="mailto:nelson&#37;&#52;&#48;crynwr&#46;com">nelson<span>&#64;</span>crynwr<span>&#46;</span>com</a>&gt;</p>
<p>FIXME: This is set up to work for the Southern Hemisphere.</p>
<p>Using
<a class="reference external" href="http://www.ga.gov.au/geodesy/datums/redfearn_geo_to_grid.jsp">http://www.ga.gov.au/geodesy/datums/redfearn_geo_to_grid.jsp</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Site</span> <span class="n">Name</span><span class="p">:</span>    <span class="n">GDA</span><span class="o">-</span><span class="n">MGA</span><span class="p">:</span> <span class="p">(</span><span class="n">UTM</span> <span class="k">with</span> <span class="n">GRS80</span> <span class="n">ellipsoid</span><span class="p">)</span>
<span class="n">Zone</span><span class="p">:</span>   <span class="mi">36</span>
<span class="n">Easting</span><span class="p">:</span>  <span class="mf">511669.521</span>  <span class="n">Northing</span><span class="p">:</span> <span class="mf">19328195.112</span>
<span class="n">Latitude</span><span class="p">:</span>   <span class="mi">84</span>  <span class="mi">0</span> <span class="s1">&#39; 0.00000 &#39;&#39;  Longitude: 34  0 &#39;</span> <span class="mf">0.00000</span> <span class="s1">&#39;&#39;</span>
<span class="n">Grid</span> <span class="n">Convergence</span><span class="p">:</span>  <span class="mi">0</span>  <span class="o">-</span><span class="mi">59</span> <span class="s1">&#39; 40.28 &#39;&#39;  Point Scale: 0.99960166</span>
<span class="n">____________</span>
<span class="n">Site</span> <span class="n">Name</span><span class="p">:</span>    <span class="n">GDA</span><span class="o">-</span><span class="n">MGA</span><span class="p">:</span> <span class="p">(</span><span class="n">UTM</span> <span class="k">with</span> <span class="n">GRS80</span> <span class="n">ellipsoid</span><span class="p">)</span>
<span class="n">Zone</span><span class="p">:</span>   <span class="mi">36</span>
<span class="n">Easting</span><span class="p">:</span>  <span class="mf">519384.803</span>  <span class="n">Northing</span><span class="p">:</span> <span class="mf">1118247.585</span>
<span class="n">Latitude</span><span class="p">:</span>   <span class="o">-</span><span class="mi">80</span>  <span class="mi">0</span> <span class="s1">&#39; 0.00000 &#39;&#39;  Longitude: 34  0 &#39;</span> <span class="mf">0.00000</span> <span class="s1">&#39;&#39;</span>
<span class="n">Grid</span> <span class="n">Convergence</span><span class="p">:</span>  <span class="mi">0</span>  <span class="mi">59</span> <span class="s1">&#39; 5.32 &#39;&#39;  Point Scale: 0.99960459</span>
<span class="n">____________</span>
<span class="n">Site</span> <span class="n">Name</span><span class="p">:</span>    <span class="n">GDA</span><span class="o">-</span><span class="n">MGA</span><span class="p">:</span> <span class="p">(</span><span class="n">UTM</span> <span class="k">with</span> <span class="n">GRS80</span> <span class="n">ellipsoid</span><span class="p">)</span>
<span class="n">Zone</span><span class="p">:</span>   <span class="mi">36</span>
<span class="n">Easting</span><span class="p">:</span>  <span class="mf">611263.812</span>  <span class="n">Northing</span><span class="p">:</span> <span class="mf">10110547.106</span>
<span class="n">Latitude</span><span class="p">:</span>   <span class="mi">1</span>  <span class="mi">0</span> <span class="s1">&#39; 0.00000 &#39;&#39;  Longitude: 34  0 &#39;</span> <span class="mf">0.00000</span> <span class="s1">&#39;&#39;</span>
<span class="n">Grid</span> <span class="n">Convergence</span><span class="p">:</span>  <span class="mi">0</span>  <span class="o">-</span><span class="mi">1</span> <span class="s1">&#39; 2.84 &#39;&#39;  Point Scale: 0.99975325</span>
<span class="n">____________</span>
<span class="n">Site</span> <span class="n">Name</span><span class="p">:</span>    <span class="n">GDA</span><span class="o">-</span><span class="n">MGA</span><span class="p">:</span> <span class="p">(</span><span class="n">UTM</span> <span class="k">with</span> <span class="n">GRS80</span> <span class="n">ellipsoid</span><span class="p">)</span>
<span class="n">Zone</span><span class="p">:</span>   <span class="mi">36</span>
<span class="n">Easting</span><span class="p">:</span>  <span class="mf">611263.812</span>  <span class="n">Northing</span><span class="p">:</span> <span class="mf">9889452.894</span>
<span class="n">Latitude</span><span class="p">:</span>   <span class="o">-</span><span class="mi">1</span>  <span class="mi">0</span> <span class="s1">&#39; 0.00000 &#39;&#39;  Longitude: 34  0 &#39;</span> <span class="mf">0.00000</span> <span class="s1">&#39;&#39;</span>
<span class="n">Grid</span> <span class="n">Convergence</span><span class="p">:</span>  <span class="mi">0</span>  <span class="mi">1</span> <span class="s1">&#39; 2.84 &#39;&#39;  Point Scale: 0.99975325</span>
</pre></div>
</div>
<p>So this uses a false northing of 10000000 in the both hemispheres.
ArcGIS used a false northing of 0 in the northern hem though.
Therefore it is difficult to actually know what hemisphere you are
in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>northing</strong> (<em>float</em>) – Northing coordinate in UTM coordinates.</p></li>
<li><p><strong>easting</strong> (<em>float</em>) – Easting coordinate in UTM coordinates</p></li>
<li><p><strong>zone</strong> (<em>int</em>) – UTM zone number.</p></li>
<li><p><strong>isSouthernHemisphere</strong> (<em>boolean</em>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> if the location is in
the southern hemisphere (default).</p></li>
<li><p><strong>reference_ellipsoid</strong> (<em>int</em>) – Reference ellipsoid for the coordinate
system (default=23 – WGS84).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple pair of latitude, longitude for the point.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.lmomentFit">
<span id="utilities-lmomentfit-module"></span><h2>Utilities.lmomentFit module<a class="headerlink" href="#module-Utilities.lmomentFit" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-lmomentFit">
<span id="lmomentfit-fit-gev-functions"></span><h3><a class="reference internal" href="#module-lmomentFit" title="lmomentFit: Functions translated from the LMOMENTS Fortran package for fitting a GEV function."><code class="xref py py-mod docutils literal notranslate"><span class="pre">lmomentFit</span></code></a> – fit GEV functions<a class="headerlink" href="#module-lmomentFit" title="Permalink to this headline">¶</a></h3>
<p>Two functions {pelgev, samlmu} from the LMOMENTS Fortran package
ported to Python to fit a Generalised Extreme Value Distribution
function. Original code developed by: J. R. M. HOSKING, IBM RESEARCH
DIVISION, T. J. WATSON RESEARCH CENTER, YORKTOWN HEIGHTS, NEW YORK
10598, U.S.A.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Permission to use, copy, modify and distribute this software for
any purpose and without fee is hereby granted, provided that this
copyright and permission notice appear on all copies of the
software. The name of the IBM Corporation may not be used in any
advertising or publicity pertaining to the use of the
software. IBM makes no warranty or representations about the
suitability of the software for any purpose. It is provided “AS
IS” without any express or implied warranty, including the implied
warranties of merchantability, fitness for a particular purpose
and non-infringement. IBM shall not be liable for any direct,
indirect, special or consequential damages resulting from the loss
of use, data or projects, whether in an action of contract or
tort, arising out of or in connection with the use or performance
of this software.</p>
</div>
<dl class="py function">
<dt id="Utilities.lmomentFit.pelgev">
<code class="sig-name descname">pelgev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xmom</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.lmomentFit.pelgev" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter estimation via L-moments for the Generalised Extreme
Value Distribution. For -0.8 &lt;= TAU3 &lt; 1., K is approximated by
rational functions as in Donaldson (1996,
Commun. Statist. Simul. Comput.). If TAU3 is outside this range,
Newton-Raphson iteration is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>xmom</strong> (List or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array of length 3, containing the L-moments Lambda-1,
Lambda-2 and TAU3.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Location, scale and shape parameters of the GEV
distribution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.lmomentFit.pelgpa">
<code class="sig-name descname">pelgpa</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xmom</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.lmomentFit.pelgpa" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter estimation via L-moments for the Generalised Pareto
Distribution.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.lmomentFit.samlmu">
<code class="sig-name descname">samlmu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">nmom</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.lmomentFit.samlmu" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample L-moments for a data array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array of length N, containing the data in ascending order.</p></li>
<li><p><strong>nmom</strong> – Number of L-moments to be found (maximum 100).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sample L-moments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.lmomentFit.samlmu3">
<code class="sig-name descname">samlmu3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.lmomentFit.samlmu3" title="Permalink to this definition">¶</a></dt>
<dd><p>Functional equivalent to lmoments.samlmu(data, 3). Vectorised for
speed but still about half speed of original fortran package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – Array of length N, containing the data in ascending order.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>First 3 L-moments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.loadData">
<span id="utilities-loaddata-module"></span><h2>Utilities.loadData module<a class="headerlink" href="#module-Utilities.loadData" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-loadData">
<span id="loaddata-load-tc-track-data-from-formatted-files"></span><h3><a class="reference internal" href="#module-loadData" title="loadData: Load formatted csv file containing tropical cyclone track information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">loadData</span></code></a> - load TC track data from formatted files<a class="headerlink" href="#module-loadData" title="Permalink to this headline">¶</a></h3>
<p>Load a formatted csv file that contains tropical cyclone track
information and return a collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects.</p>
<p>The format of the files is defined in a named section of the input
configuration file. See the <a class="reference internal" href="sources.html#sourceformats"><span class="std std-ref">Source Formats</span></a> section
of the User Guide for details on specifying the format.</p>
<p>TODO:
Modify the source to be a dict containing the kwargs to
<code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy.genfromtxt</span></code> to make reading additional formats possible
(e.g. include converters for some data fields, as in B-deck format
track files.</p>
<dl class="py function">
<dt id="Utilities.loadData.date2ymdh">
<code class="sig-name descname">date2ymdh</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dates</span></em>, <em class="sig-param"><span class="n">datefmt</span><span class="o">=</span><span class="default_value">'%Y-%m-%d %H:%M:%S'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.date2ymdh" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert date strings to arrays for date components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array of str objects that describe a date.</p></li>
<li><p><strong>datefmt</strong> (<em>str</em>) – Format string of the date values in <cite>dates</cite>,
default=’%Y-%m-%d %H:%M:%S’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> arrays containing the year,
month, day, hour and minute of the dates contained
in the input array <cite>dates</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.filterPressure">
<code class="sig-name descname">filterPressure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pressure</span></em>, <em class="sig-param"><span class="n">inputPressureUnits</span><span class="o">=</span><span class="default_value">'hPa'</span></em>, <em class="sig-param"><span class="n">missingValue</span><span class="o">=</span><span class="default_value">9223372036854775807</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.filterPressure" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter pressure values to remove any non-physical values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pressure</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – input pressure values to check.</p></li>
<li><p><strong>inputPressureUnits</strong> (<em>str</em>) – The units of the pressure values.
Can be one of <code class="docutils literal notranslate"><span class="pre">hPa</span></code>, <code class="docutils literal notranslate"><span class="pre">Pa</span></code>, <code class="docutils literal notranslate"><span class="pre">kPa</span></code>,
<code class="docutils literal notranslate"><span class="pre">Pascals</span></code> or <code class="docutils literal notranslate"><span class="pre">mmHg</span></code>.</p></li>
<li><p><strong>missingValue</strong> (int or float (default <code class="docutils literal notranslate"><span class="pre">sys.maxsize</span></code>)) – replace all null values in the input data
with this value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> with only valid pressure values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getInitialPositions">
<code class="sig-name descname">getInitialPositions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getInitialPositions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the array indices corresponding to the initial position of TCs in
the input dataset. This is done through examining the data for a number
of specific fields to see when they change, or if the data has a field
that indicates such an instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of arrays that contains the data loaded
from the input file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of indices that can be used to slice
the observations and return those corresponding to an
initial TC position.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using only the ‘num’ field will result in different results
than using ‘num’ and ‘season’. From experience, the ‘num’ field
in best-track datasets refers to the sequential number of the
storm for that season - i.e. it starts at 1 for each season and
increments for each new storm. The use of ‘num’ only should be
reserved for those situations where the dataset is known to
have unique numbers for each storm (e.g in simulated data).</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getMaxWind">
<code class="sig-name descname">getMaxWind</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">track</span></em>, <em class="sig-param"><span class="n">missingValue</span><span class="o">=</span><span class="default_value">9223372036854775807</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getMaxWind" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the maximum wind speed of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>track</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> instance</p></li>
<li><p><strong>missingValue</strong> (int or float (default <code class="docutils literal notranslate"><span class="pre">sys.maxsize</span></code>)) – replace all null values in the input data
with this value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Track.trackMaxWind</span></code> attribute updated with calculated
wind speed updated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getMinPressure">
<code class="sig-name descname">getMinPressure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">track</span></em>, <em class="sig-param"><span class="n">missingValue</span><span class="o">=</span><span class="default_value">9223372036854775807</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getMinPressure" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the minimum pressure of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>track</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> instance</p></li>
<li><p><strong>missingValue</strong> – Replace missing values with this value
(default <code class="docutils literal notranslate"><span class="pre">sys.maxsize</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Track.trackMinPressure</span></code> attribute updated</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getPoci">
<code class="sig-name descname">getPoci</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">penv</span></em>, <em class="sig-param"><span class="n">pcentre</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">jdays</span></em>, <em class="sig-param"><span class="n">eps</span></em>, <em class="sig-param"><span class="n">coeffs</span><span class="o">=</span><span class="default_value">[2324.1564738613392, - 0.6539853183796136, - 1.3984456535888878, 0.0007407292800881893, 0.004446923142934609, - 1.4337623534206905]</span></em>, <em class="sig-param"><span class="n">missingValue</span><span class="o">=</span><span class="default_value">9223372036854775807</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getPoci" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a modified pressure for the outermost closed isobar, based
on a model of daily long-term mean SLP values, central pressure,
latitude and day of year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>penv</strong> – environmental pressure estimate (from long term mean pressure
dataset, hPa).</p></li>
<li><p><strong>pcentre</strong> – Central pressure of storm (hPa).</p></li>
<li><p><strong>lat</strong> – Latitude of storm (degrees).</p></li>
<li><p><strong>jdays</strong> – Julian day (day of year).</p></li>
<li><p><strong>eps</strong> – random variate. Retained as a constant for a single storm.</p></li>
<li><p><strong>coeffs</strong> (<em>list</em>) – Coefficients of the model. Defaults based on 
Southern Hemisphere data 
(IBTrACS v03r06, 1981-2014).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Revised estimate for the pressure of outermost closed isobar.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getSpeedBearing">
<code class="sig-name descname">getSpeedBearing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">deltatime</span></em>, <em class="sig-param"><span class="n">ieast</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">missingValue</span><span class="o">=</span><span class="default_value">9223372036854775807</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getSpeedBearing" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the speed and bearing of a TC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array of 0/1 indicating start of new TC (1)</p></li>
<li><p><strong>lon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Longitudes of TC positions.</p></li>
<li><p><strong>lat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Latitudes of TC positions.</p></li>
<li><p><strong>deltatime</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Time difference (hours) between
consecutive TC observations.</p></li>
<li><p><strong>ieast</strong> (<em>int</em>) – Indicate which direction has positive
longitude. 1 = positive longitude eastwards
-1 = positive longiture westwards.</p></li>
<li><p><strong>missingValue</strong> (int or float, default = <cite>sys.maxsize</cite>) – Replace questionable values with <cite>missingValue</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>speed and bearing : <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">speed</span><span class="p">,</span> <span class="n">bearing</span> <span class="o">=</span> <span class="n">getSpeedBearing</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">deltatime</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getTime">
<code class="sig-name descname">getTime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em>, <em class="sig-param"><span class="n">hour</span></em>, <em class="sig-param"><span class="n">minute</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the number of days since 0001-01-01 00:00:00 UTC + 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or list) – Year values.</p></li>
<li><p><strong>month</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or list) – Month values.</p></li>
<li><p><strong>day</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or list) – Day values.</p></li>
<li><p><strong>hour</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or list) – Hour values.</p></li>
<li><p><strong>minute</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or list) – Minute values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of days since 0001-01-01 00:00:00 UTC + 1</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getTimeDelta">
<code class="sig-name descname">getTimeDelta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em>, <em class="sig-param"><span class="n">hour</span></em>, <em class="sig-param"><span class="n">minute</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getTimeDelta" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the time difference between consecutive observations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of the year of all observations.</p></li>
<li><p><strong>month</strong> – As for year, but for the month of observation.</p></li>
<li><p><strong>day</strong> – As for year, but for the day of observation.</p></li>
<li><p><strong>hour</strong> – As for year, but for the hour of the observation.</p></li>
<li><p><strong>minutes</strong> – As for year, but for the hour of the observation.</p></li>
<li><p><strong>seconds</strong> – As for year, but for the hour of the observation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of time difference between
observations in hours.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.getTimeElapsed">
<code class="sig-name descname">getTimeElapsed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indicator</span></em>, <em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em>, <em class="sig-param"><span class="n">hour</span></em>, <em class="sig-param"><span class="n">minute</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.getTimeElapsed" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the age in hours of each event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array (values of 1 or 0) indicating the beginning of
a new TC in the input dataset.</p></li>
<li><p><strong>year</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of the year of all observations.</p></li>
<li><p><strong>month</strong> – As for year, but for the month of observation.</p></li>
<li><p><strong>day</strong> – As for year, but for the day of observation.</p></li>
<li><p><strong>hour</strong> – As for year, but for the hour of the observation.</p></li>
<li><p><strong>minutes</strong> – As for year, but for the hour of the observation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of time since the initial observation
for each TC (in hours).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.julianDays">
<code class="sig-name descname">julianDays</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">day</span></em>, <em class="sig-param"><span class="n">hour</span></em>, <em class="sig-param"><span class="n">minute</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.julianDays" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the julian day (day of year) based on the known date/time
information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of the year of all observations.</p></li>
<li><p><strong>month</strong> – As for year, but for the month of observation.</p></li>
<li><p><strong>day</strong> – As for year, but for the day of observation.</p></li>
<li><p><strong>hour</strong> – As for year, but for the hour of the observation.</p></li>
<li><p><strong>minute</strong> – As for year, but for the hour of the observation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of julian day values for each
observation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.loadTrackFile">
<code class="sig-name descname">loadTrackFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">configFile</span></em>, <em class="sig-param"><span class="n">trackFile</span></em>, <em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">missingValue</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">calculateWindSpeed</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.loadTrackFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Load TC track data from the given input file, from a specified source.
The configFile is a configuration file that contains a section called
‘source’ that describes the data.
This returns a collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects that contains
the details of the TC tracks in the input file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configFile</strong> (<em>str</em>) – Configuration file with a section <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p></li>
<li><p><strong>trackFile</strong> (<em>str</em>) – Path to a csv-formatted file containing TC data.</p></li>
<li><p><strong>missingValue</strong> – Replace all null values in the input data with
this value (default=0).</p></li>
<li><p><strong>calculateWindSpeed</strong> (<em>boolean</em>) – Calculate maximum wind speed using
a pressure-wind relation described
in <a class="reference internal" href="#Utilities.loadData.maxWindSpeed" title="Utilities.loadData.maxWindSpeed"><code class="xref py py-func docutils literal notranslate"><span class="pre">maxWindSpeed()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Pararm str source</dt>
<dd class="field-even"><p>Name of the source format of the TC data. There
<em>must</em> be a section in <code class="docutils literal notranslate"><span class="pre">configFile</span></code> matching
this string, containing the details of the format
of the data.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects.
If any of the variables are not present in the input
dataset, they are (where possible) calculated
(date/time/windspeed), sampled from default datasets
(e.g. environmental pressure) or set to the missing value.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span> <span class="o">=</span> <span class="n">loadTrackFile</span><span class="p">(</span><span class="s1">&#39;tcrm.ini&#39;</span><span class="p">,</span> <span class="s1">&#39;IBTRaCS.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;IBTrACS&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.ltmPressure">
<code class="sig-name descname">ltmPressure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jdays</span></em>, <em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">ncfile</span></em>, <em class="sig-param"><span class="n">ncvar</span><span class="o">=</span><span class="default_value">'slp'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.ltmPressure" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract pressure value from a daily long-term mean SLP dataset at the
given day of year and lon,lat position
To use this function (and hence some form of daily LTM SLP data) requires
knowledge of the day of year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jdays</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Julian day (day of year) values.</p></li>
<li><p><strong>time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Time of day for each observation (fraction of a day).</p></li>
<li><p><strong>lon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Longitude of TC position.</p></li>
<li><p><strong>lat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Latitude of TC position.</p></li>
<li><p><strong>ncfile</strong> (<em>str</em>) – Path to netCDF file containing daily long-term mean
sea level pressure data.</p></li>
<li><p><strong>ncvar</strong> (<em>str</em>) – Name of the netcdf variable that holds the SLP data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of long-term mean sea level pressure
values at the day of year and positions given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.maxWindSpeed">
<code class="sig-name descname">maxWindSpeed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">deltatime</span></em>, <em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">pressure</span></em>, <em class="sig-param"><span class="n">penv</span></em>, <em class="sig-param"><span class="n">gustfactor</span><span class="o">=</span><span class="default_value">0.9524</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.maxWindSpeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 10-minute-mean maximum wind speed from the central
pressure deficit, using the method described in Holland et al. (2010).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array (values of 1 or 0) indicating the beginning of
a new TC in the input dataset.</p></li>
<li><p><strong>deltatime</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Time difference (in hours) between each point in the
record.</p></li>
<li><p><strong>lon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Longitudes of TC postions.</p></li>
<li><p><strong>lat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Latitudes of TC positions.</p></li>
<li><p><strong>pressure</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Central pressure estimate of TCs (hPa).</p></li>
<li><p><strong>penv</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Environmental pressure estimates for each TC postion (hPa).</p></li>
<li><p><strong>gf</strong> (<em>float</em>) – Gust factor - default value represents converting from a
1-minute sustained wind speed to a 10-minute mean wind
speed. Based on Harper et al. 2010, WMO-TD1555.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of estimated wind speed based on
central pressure deficit.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">maxWindSpeed</span><span class="p">(</span><span class="n">indicator</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span> <span class="n">penv</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.parseAge">
<code class="sig-name descname">parseAge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">indicator</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.parseAge" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the TC age information to get a proxy date record. Assumes every TC
starts at 2000-01-01 00:00 and calculates year, month, day, hour and
minute values based on the age field.</p>
<p>Assumes the age is given in hours since the initial timestep.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>dict</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of arrays that contains the data loaded
from the input file.</p></li>
<li><p><strong>indicator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array (values of 1 or 0) indicating the beginning of
a new TC in the input dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray`s</span> <span class="pre">of</span> <span class="pre">year,</span> <span class="pre">month,</span> <span class="pre">day,</span> <span class="pre">hour,</span> <span class="pre">minute</span>
<span class="pre">and</span> <span class="pre">:class:`datetime.datetime</span></code> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.loadData.parseDates">
<code class="sig-name descname">parseDates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">indicator</span></em>, <em class="sig-param"><span class="n">datefmt</span><span class="o">=</span><span class="default_value">'%Y-%m-%d %H:%M:%S'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.loadData.parseDates" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the date/time information to extract year, month, day, hour and
minute details for the input dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>dict</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of arrays that contains the data loaded
from the input file.</p></li>
<li><p><strong>indicator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array (values of 1 or 0) indicating the beginning of
a new TC in the input dataset.</p></li>
<li><p><strong>datefmt</strong> (<em>str</em>) – Format string of the date values in <cite>dates</cite>,
default=’%Y-%m-%d %H:%M:%S’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray`s</span> <span class="pre">of</span> <span class="pre">year,</span> <span class="pre">month,</span> <span class="pre">day,</span> <span class="pre">hour,</span> <span class="pre">minute</span>
<span class="pre">and</span> <span class="pre">:class:`datetime.datetime</span></code> objects.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.maputils">
<span id="utilities-maputils-module"></span><h2>Utilities.maputils module<a class="headerlink" href="#module-Utilities.maputils" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-maputils">
<span id="maputils-mapping-functions"></span><h3><a class="reference internal" href="#module-maputils" title="maputils: Mapping functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">maputils</span></code></a> – mapping functions<a class="headerlink" href="#module-maputils" title="Permalink to this headline">¶</a></h3>
<p>Contains mapping functions that operate on arrays. Supercedes some of
the functions lying around in some unusual places (like DataProcess).</p>
<dl class="py function">
<dt id="Utilities.maputils.bear2LatLon">
<code class="sig-name descname">bear2LatLon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bearing</span></em>, <em class="sig-param"><span class="n">distance</span></em>, <em class="sig-param"><span class="n">oLon</span></em>, <em class="sig-param"><span class="n">oLat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.bear2LatLon" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the longitude and latitude of a new point from an origin
point given a distance and bearing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bearing</strong> – Direction to new position (degrees, +ve clockwise
from north).</p></li>
<li><p><strong>distance</strong> – Distance to new position (km).</p></li>
<li><p><strong>oLon</strong> – Initial longitude.</p></li>
<li><p><strong>oLat</strong> – Initial latitude.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new longitude and latitude (in degrees)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.bearing2theta">
<code class="sig-name descname">bearing2theta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bearing</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.bearing2theta" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts bearing in azimuth coordinate system into theta in
cartesian coordinate system. Assumes -2*pi &lt;= bearing &lt;= 2*pi</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bearing</strong> – Bearing to convert (in radians) (+ve clockwise
from north).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Angle in cartesian coordinate system (+ve anticlockwise
from east).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.coriolis">
<code class="sig-name descname">coriolis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.coriolis" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Coriolis factor (f) for a given latitude (degrees).
If a list is passed, return a list, else return a single value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lat</strong> (<em>Array-like.</em>) – Latitude (degrees).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coriolis factor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.dist2GC">
<code class="sig-name descname">dist2GC</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cLon1</span></em>, <em class="sig-param"><span class="n">cLat1</span></em>, <em class="sig-param"><span class="n">cLon2</span></em>, <em class="sig-param"><span class="n">cLat2</span></em>, <em class="sig-param"><span class="n">lonArray</span></em>, <em class="sig-param"><span class="n">latArray</span></em>, <em class="sig-param"><span class="n">units</span><span class="o">=</span><span class="default_value">'km'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.dist2GC" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the distance between an array of points and the great
circle joining two (other) points. All input values are in
degrees. By default returns distance in km, other units specified
by the ‘units’ kwarg.</p>
<p>Based on a cross-track error formulation from:
<a class="reference external" href="http://williams.best.vwh.net/avform.htm#XTE">http://williams.best.vwh.net/avform.htm#XTE</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cLon1</strong> (<em>float</em>) – Longitude of first point.</p></li>
<li><p><strong>cLat1</strong> (<em>float</em>) – Latitude of first point.</p></li>
<li><p><strong>cLon2</strong> (<em>float</em>) – Longitude of second point.</p></li>
<li><p><strong>cLat2</strong> (<em>float</em>) – Latitude of second point.</p></li>
<li><p><strong>lonArray</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of longitudes for which
the distance to the line joining the two points
will be calculated.</p></li>
<li><p><strong>latArray</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of latitudes for which the
distance to the line joining the two points will
be calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-d array of distances between the array points and the
line joining two points.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.distGC">
<code class="sig-name descname">distGC</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">lon</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.distGC" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance based on the great circle navigation between pairs of points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> – A pair of latitude values for the two points.</p></li>
<li><p><strong>lon</strong> – A pair of longitude values for the two points.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Distance (in kilometres) between the two points, based on
great circle navigation.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dist</span> <span class="o">=</span> <span class="n">distGC</span><span class="p">([</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">40</span><span class="p">],[</span><span class="mi">120</span><span class="p">,</span><span class="mi">190</span><span class="p">])</span>
<span class="go">6914.42</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.find_index">
<code class="sig-name descname">find_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">array</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.find_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the index of ‘array’ with a value closest to ‘value’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or <cite>list</cite>.) – array of data values.</p></li>
<li><p><strong>value</strong> – a value to search <cite>array</cite> for
(or find the index of the nearest value to <cite>value</cite>).</p></li>
<li><p><strong>idx</strong> (<em>int</em>) – index of <cite>array</cite> that most closely matches
<cite>value</cite></p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>ValueError if <cite>value</cite> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or
a list</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find_index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">100.</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">15.25</span><span class="p">)</span>
<span class="go">30</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.find_nearest">
<code class="sig-name descname">find_nearest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">array</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.find_nearest" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the closest value in ‘array’ to ‘value’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – array of data values.</p></li>
<li><p><strong>value</strong> (<em>int</em><em> or </em><em>float</em>) – a value to search the array for (or find the index of the
nearest value to ‘value’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array[idx], where idx is the index of array that corresponds
to the value closest to ‘value’.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If <cite>value</cite> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or
a list.</p></li>
<li><p><strong>IndexError</strong> – If the <cite>value</cite> cannot be found in the <cite>array</cite></p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">find_nearest</span><span class="p">(</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">100.</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="mf">15.25</span> <span class="p">)</span>
<span class="go">15.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.gridLatLonBear">
<code class="sig-name descname">gridLatLonBear</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cLon</span></em>, <em class="sig-param"><span class="n">cLat</span></em>, <em class="sig-param"><span class="n">lonArray</span></em>, <em class="sig-param"><span class="n">latArray</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.gridLatLonBear" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a grid containing the bearing of the points defined by
(lonArray,latArray) from the point defined by (cLon,cLat).
(lonArray,latArray) and (cLon,cLat) are in degrees.
Returns bearing in radians.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cLon</strong> (<em>float</em>) – Longitude of the point to measure the distance from.</p></li>
<li><p><strong>cLat</strong> (<em>float</em>) – Latitude of the point to measure the distance from.</p></li>
<li><p><strong>lonArray</strong> – 1-d array of longitude values that will define the
grid over which distances will be calculated.</p></li>
<li><p><strong>latArray</strong> – 1-d array of latitude values that will define the
grid over which distances will be calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-d array containing the bearing (direction) of the points
defined in <code class="docutils literal notranslate"><span class="pre">lonArray</span></code> and <code class="docutils literal notranslate"><span class="pre">latArray</span></code> from the point
(<code class="docutils literal notranslate"><span class="pre">cLon</span></code>, <code class="docutils literal notranslate"><span class="pre">cLat</span></code>)</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">maputils</span> <span class="kn">import</span> <span class="n">gridLatLonBear</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lonArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">90.</span><span class="p">,</span><span class="mf">100.</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">latArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mf">20.</span><span class="p">,</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gridLatLonBear</span><span class="p">(</span> <span class="mf">105.</span><span class="p">,</span> <span class="o">-</span><span class="mf">15.</span><span class="p">,</span> <span class="n">lonArray</span><span class="p">,</span> <span class="n">latArray</span><span class="p">)</span>
<span class="go">array([[-1.94475949, -1.94659552, -1.94845671, ..., -2.36416927,</span>
<span class="go">        -2.37344337, -2.38290081],</span>
<span class="go">       [-1.93835542, -1.94015859, -1.94198663, ..., -2.35390045,</span>
<span class="go">        -2.36317282, -2.37263233],</span>
<span class="go">       [-1.93192776, -1.93369762, -1.93549204, ..., -2.34343069,</span>
<span class="go">        -2.35269718, -2.36215458],</span>
<span class="go">        ...,</span>
<span class="go">       [-1.29066433, -1.28850464, -1.28632113, ..., -0.84374983,</span>
<span class="go">        -0.83405688, -0.82416555],</span>
<span class="go">       [-1.28446304, -1.28227062, -1.28005406, ..., -0.83332654,</span>
<span class="go">        -0.82361918, -0.813717  ],</span>
<span class="go">       [-1.27828819, -1.27606348, -1.27381433, ..., -0.82310335,</span>
<span class="go">        -0.81338586, -0.80347714]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.gridLatLonDist">
<code class="sig-name descname">gridLatLonDist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cLon</span></em>, <em class="sig-param"><span class="n">cLat</span></em>, <em class="sig-param"><span class="n">lonArray</span></em>, <em class="sig-param"><span class="n">latArray</span></em>, <em class="sig-param"><span class="n">units</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.gridLatLonDist" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a grid containing the spherical earth distance
of the points defined by (lonarray, latarray) from the
point defined by (clon, clat).
(lonarray,latarray) and (clon,clat) are in degrees.
Returns distances in km by default, other units specified by the
‘units’ kwarg.</p>
<p>Based on m_lldist.m by Rich Pawlowicz (<a class="reference external" href="mailto:rich&#37;&#52;&#48;ocgy&#46;ubc&#46;ca">rich<span>&#64;</span>ocgy<span>&#46;</span>ubc<span>&#46;</span>ca</a>)
Modified by Craig Arthur 2006-11-13</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cLon</strong> (<em>float</em>) – Longitude of the point to measure the distance from.</p></li>
<li><p><strong>cLat</strong> (<em>float</em>) – Latitude of the point to measure the distance from.</p></li>
<li><p><strong>lonArray</strong> – 1-d array of longitude values that will define the
grid over which distances will be calculated.</p></li>
<li><p><strong>latArray</strong> – 1-d array of latitude values that will define the
grid over which distances will be calculated.</p></li>
<li><p><strong>units</strong> (<em>str</em>) – Units of distance to be returned (default is kilometre)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-d array containing the distance of the points defined in
<code class="docutils literal notranslate"><span class="pre">lonArray</span></code> and <code class="docutils literal notranslate"><span class="pre">latArray</span></code> from the point
(<code class="docutils literal notranslate"><span class="pre">cLon</span></code>, <code class="docutils literal notranslate"><span class="pre">cLat</span></code>).</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lonArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">90.</span><span class="p">,</span><span class="mf">100.</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">latArray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mf">20.</span><span class="p">,</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dist</span> <span class="o">=</span> <span class="n">gridLatLonDist</span><span class="p">(</span> <span class="mf">105.</span><span class="p">,</span> <span class="o">-</span><span class="mf">15.</span><span class="p">,</span> <span class="n">lonArray</span><span class="p">,</span> <span class="n">latArray</span><span class="p">,</span> <span class="s1">&#39;km&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.latLon2Azi">
<code class="sig-name descname">latLon2Azi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">ieast</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">azimuth</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">wantdeg</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.latLon2Azi" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the bearing and distance (in km) between consecutive
members of the array pair (lat,lon).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> – Latitudes of positions.</p></li>
<li><p><strong>lon</strong> – Longitudes of positions.</p></li>
<li><p><strong>ieast</strong> (<em>int</em>) – 1 for longitudes increasing towards East, -1 for
longitudes increasing towards West (default 1).</p></li>
<li><p><strong>azimuth</strong> (<em>float</em>) – Local coordinate system constructed with origin at
latr,lonr, X axis (‘North’) in direction of azimuth,
and Y axis such that X x Y = Z(down)
when going from (lat,lon) to (x,y) (default 0).</p></li>
<li><p><strong>wantdeg</strong> (<em>boolean</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> return bearings as degrees, not radians.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>azimuth (+ve clockwise from north) and distance (in km).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.latLon2XY">
<code class="sig-name descname">latLon2XY</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xr</span></em>, <em class="sig-param"><span class="n">yr</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">ieast</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">azimuth</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.latLon2XY" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the cartesian distance between consecutive lat,lon
points. Will bomb at North and South Poles. Assumes geographical
coordinates and azimuth in decimal degrees, local Cartesian
coordinates in km.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xr</strong> – Reference longitude, normally 0.</p></li>
<li><p><strong>yr</strong> – Reference latitude, normally 0.</p></li>
<li><p><strong>lat</strong> – Array of latitudes.</p></li>
<li><p><strong>lon</strong> – Array of longitudes.</p></li>
<li><p><strong>ieast</strong> (<em>int</em>) – 1 if longitude increases toward the East
(normal case), -1 if longitude increases
toward the West.</p></li>
<li><p><strong>azimuth</strong> (<em>int</em>) – local coordinate system constructed with
origin at latr,lonr, X axis (‘North’) in
direction of azimuth, and Y axis such that X x
Y = Z(down) when going from (lat,lon) to (x,y)
scalar or array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of northward and eastward distances between
consecutive points. use <a class="reference internal" href="#Utilities.maputils.xy2r" title="Utilities.maputils.xy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">xy2r()</span></code></a> to convert to a
distance between consecutive points.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.makeGrid">
<code class="sig-name descname">makeGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cLon</span></em>, <em class="sig-param"><span class="n">cLat</span></em>, <em class="sig-param"><span class="n">margin</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">resolution</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">minLon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxLon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minLat</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxLat</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.makeGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a grid of the distance and angle of a grid of points
surrounding a storm centre given the location of the storm. The
grid margin and grid size can be set in configuration
files. xMargin, yMargin and gridSize are in degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cLon</strong> (<em>float</em>) – Reference longitude.</p></li>
<li><p><strong>cLat</strong> (<em>float</em>) – Reference latitude.</p></li>
<li><p><strong>margin</strong> (<em>float</em>) – Distance (in degrees) around the centre to fit the
grid.</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – Resolution of the grid (in degrees).</p></li>
<li><p><strong>minLon</strong> (<em>float</em>) – Minimum longitude of points to include in the grid.</p></li>
<li><p><strong>maxLon</strong> (<em>float</em>) – Maximum longitude of points to include in the grid.</p></li>
<li><p><strong>minLat</strong> (<em>float</em>) – Minimum latitude of points to include in the grid.</p></li>
<li><p><strong>maxLat</strong> (<em>float</em>) – Maximum latitude of points to include in the grid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2 2-d arrays containing the distance (km) and bearing (azimuthal)
of all points in a grid from the <code class="docutils literal notranslate"><span class="pre">cLon</span></code>, <code class="docutils literal notranslate"><span class="pre">cLat</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.makeGridDomain">
<code class="sig-name descname">makeGridDomain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cLon</span></em>, <em class="sig-param"><span class="n">cLat</span></em>, <em class="sig-param"><span class="n">minLon</span></em>, <em class="sig-param"><span class="n">maxLon</span></em>, <em class="sig-param"><span class="n">minLat</span></em>, <em class="sig-param"><span class="n">maxLat</span></em>, <em class="sig-param"><span class="n">margin</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">resolution</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.makeGridDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a grid of the distance and angle of a grid of points
across a complete model domain, given the location of the storm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cLon</strong> (<em>float</em>) – Reference longitude.</p></li>
<li><p><strong>cLat</strong> (<em>float</em>) – Reference latitude.</p></li>
<li><p><strong>minLon</strong> (<em>float</em>) – Minimum longitude of points to include in the grid.</p></li>
<li><p><strong>maxLon</strong> (<em>float</em>) – Maximum longitude of points to include in the grid.</p></li>
<li><p><strong>minLat</strong> (<em>float</em>) – Minimum latitude of points to include in the grid.</p></li>
<li><p><strong>maxLat</strong> (<em>float</em>) – Maximum latitude of points to include in the grid.</p></li>
<li><p><strong>margin</strong> (<em>float</em>) – Distance (in degrees) around the centre to fit the
grid.</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – Resolution of the grid (in degrees).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2 2-d arrays containing the distance (km) and bearing (azimuthal)
of all points in a grid from the <code class="docutils literal notranslate"><span class="pre">cLon</span></code>, <code class="docutils literal notranslate"><span class="pre">cLat</span></code>, spanning the
complete region.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.meshLatLon">
<code class="sig-name descname">meshLatLon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cLon</span></em>, <em class="sig-param"><span class="n">cLat</span></em>, <em class="sig-param"><span class="n">margin</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">resolution</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.meshLatLon" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a meshgrid of the longitudes and latitudes of a grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cLon</strong> (<em>float</em>) – Longitude of centre of grid.</p></li>
<li><p><strong>cLat</strong> (<em>float</em>) – Latitude of centre of grid.</p></li>
<li><p><strong>margin</strong> (<em>float</em>) – Distance (in degrees) around the centre to
build the grid.</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – Resolution of the grid (degrees).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coordinate matrices for the longitude and latitude
vectors, covering the region within <code class="docutils literal notranslate"><span class="pre">margin</span></code>
degrees of (<code class="docutils literal notranslate"><span class="pre">cLon</span></code>, <code class="docutils literal notranslate"><span class="pre">cLat</span></code>).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.meshLatLonDomain">
<code class="sig-name descname">meshLatLonDomain</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minLon</span></em>, <em class="sig-param"><span class="n">maxLon</span></em>, <em class="sig-param"><span class="n">minLat</span></em>, <em class="sig-param"><span class="n">maxLat</span></em>, <em class="sig-param"><span class="n">margin</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">resolution</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.meshLatLonDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a meshgrid of the lon/lat grid across th full model domain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minLon</strong> (<em>float</em>) – Minimum longitude of the domain.</p></li>
<li><p><strong>maxLon</strong> (<em>float</em>) – Maximum longitude of the domain.</p></li>
<li><p><strong>minLat</strong> (<em>float</em>) – Minimum latitude of the domain.</p></li>
<li><p><strong>maxLat</strong> (<em>float</em>) – Maximum latitude of the domain.</p></li>
<li><p><strong>margin</strong> (<em>float</em>) – Distance (in degrees) around the centre to
build the grid.</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – Resolution of the grid (degrees).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coordinate matrices for the longitude and latitude
vectors, covering the full domain, plus an additional
margin of <code class="docutils literal notranslate"><span class="pre">margin</span></code> degrees.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.theta2bearing">
<code class="sig-name descname">theta2bearing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.theta2bearing" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a cartesian angle (in radians) to an azimuthal bearing
(in radians). Assumes -2*pi &lt;= theta &lt;= 2*pi</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>theta</strong> – Angle in cartesian coordinate system (+ve anticlockwise
from east).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Bearing in azimuth coordinate system (+ve clockwise
from north).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.maputils.xy2r">
<code class="sig-name descname">xy2r</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.maputils.xy2r" title="Permalink to this definition">¶</a></dt>
<dd><p>Given x and y arrays, returns the distance between consecutive
elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – x-coordinate of points.</p></li>
<li><p><strong>y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – y-coordinate of points.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Distance (in native units) between consecutive points.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.metutils">
<span id="utilities-metutils-module"></span><h2>Utilities.metutils module<a class="headerlink" href="#module-Utilities.metutils" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-metutils">
<span id="metutils-perform-basic-meteorological-calculations"></span><h3><a class="reference internal" href="#module-metutils" title="metutils: perform basic meteorological calculations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">metutils</span></code></a> – perform basic meteorological calculations<a class="headerlink" href="#module-metutils" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.metutils.convert">
<code class="sig-name descname">convert</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">inunits</span></em>, <em class="sig-param"><span class="n">outunits</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert value from input units to output units.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Value to be converted</p></li>
<li><p><strong>inunits</strong> (<em>str</em>) – Input units.</p></li>
<li><p><strong>outunits</strong> (<em>str</em>) – Output units.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Value converted to <code class="docutils literal notranslate"><span class="pre">outunits</span></code> units.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.coriolis">
<code class="sig-name descname">coriolis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.coriolis" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Coriolis factor (f) for a given latitude (degrees).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or scalar float) – Latitude (degrees).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coriolis factor</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or scalar float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.dewPointToRH">
<code class="sig-name descname">dewPointToRH</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t_dry</span></em>, <em class="sig-param"><span class="n">t_dew</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.dewPointToRH" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate relative humidity from dry bulb and dew point (in degrees
Celsius)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t_dry</strong> (<em>float</em>) – Dry bulb temperature (degrees Celsius).</p></li>
<li><p><strong>t_dew</strong> (<em>float</em>) – Dew point temperature (degrees Celsius).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Relative humidity (%)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.dewPointToVapPr">
<code class="sig-name descname">dewPointToVapPr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t_dp</span></em>, <em class="sig-param"><span class="n">units_vp</span><span class="o">=</span><span class="default_value">'hPa'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.dewPointToVapPr" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate vapour pressure from dew point temperature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t_dp</strong> (<em>float</em>) – Dew point temperature (degrees Celsius)</p></li>
<li><p><strong>units_vp</strong> (<em>str</em>) – Output units (default <code class="docutils literal notranslate"><span class="pre">gPressureUnits</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Vapour pressure of water content.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.dewPointToWetBulb">
<code class="sig-name descname">dewPointToWetBulb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">Td</span></em>, <em class="sig-param"><span class="n">pressure</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.dewPointToWetBulb" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate wet bulb temperature from dry bulb temperature,
dew point temperature and air pressure.</p>
<p>Based on the code underpinning the form at:
<a class="reference external" href="http://www.srh.noaa.gov/epz/?n=wxcalc_dewpoint">http://www.srh.noaa.gov/epz/?n=wxcalc_dewpoint</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>float</em>) – Dry bulb temperature (degrees Celcius).</p></li>
<li><p><strong>Td</strong> (<em>float</em>) – Dew point temperature (degrees Celcius).</p></li>
<li><p><strong>pressure</strong> (<em>float</em>) – Air pressure (hPa).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Wet bulb temperature (degrees Celcius).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p>TODO: Add unit tests.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.elevToAirPr">
<code class="sig-name descname">elevToAirPr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">elev</span></em>, <em class="sig-param"><span class="n">units_ap</span><span class="o">=</span><span class="default_value">'hPa'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.elevToAirPr" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate air pressure in hectopascals (mb) at a given elevation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elev</strong> (<em>float</em>) – Elevation above sea level (metres).</p></li>
<li><p><strong>units_ap</strong> (<em>str</em>) – Units of air pressure (default <code class="docutils literal notranslate"><span class="pre">&quot;hPa&quot;</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Approximate air pressure at the given elevation
in the specified or default units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.genesisPotential">
<code class="sig-name descname">genesisPotential</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zeta</span></em>, <em class="sig-param"><span class="n">rh</span></em>, <em class="sig-param"><span class="n">vmax</span></em>, <em class="sig-param"><span class="n">shear</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.genesisPotential" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate genesis potential index</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.mixRatToVapPr">
<code class="sig-name descname">mixRatToVapPr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rat</span></em>, <em class="sig-param"><span class="n">prs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.mixRatToVapPr" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate vapour pressure from mixing ratio.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rat</strong> (<em>float</em>) – Mixing ratio.</p></li>
<li><p><strong>prs</strong> (<em>float</em>) – Air pressure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Vapour pressure.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.rHToDewPoint">
<code class="sig-name descname">rHToDewPoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rh</span></em>, <em class="sig-param"><span class="n">t_dry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.rHToDewPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate dew point from relative humidity and dry bulb (in degrees
Celsius).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rh</strong> (<em>float</em>) – Relative humidity (%).</p></li>
<li><p><strong>t_dry</strong> (<em>float</em>) – Dry bulb temperature (degrees Celsius).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dew point temperture (degrees Celsius).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.rHToMixRat">
<code class="sig-name descname">rHToMixRat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rh</span></em>, <em class="sig-param"><span class="n">tmp</span></em>, <em class="sig-param"><span class="n">prs</span></em>, <em class="sig-param"><span class="n">tmp_units</span><span class="o">=</span><span class="default_value">'C'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.rHToMixRat" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mixing ratio from relative humidity, temperature and pressure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rh</strong> (<em>float</em>) – Relative humidity (%).</p></li>
<li><p><strong>tmp</strong> (<em>float</em>) – Temperature (any units, default degrees Celsius).</p></li>
<li><p><strong>prs</strong> (<em>float</em>) – Air pressure (hPa).</p></li>
<li><p><strong>tmp_units</strong> (<em>str</em>) – Air temperature units (default degrees Celsius).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mixing ratio (g/kg).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.satVapPr">
<code class="sig-name descname">satVapPr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">temp</span></em>, <em class="sig-param"><span class="n">units_vp</span><span class="o">=</span><span class="default_value">'hPa'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.satVapPr" title="Permalink to this definition">¶</a></dt>
<dd><p>Saturation vapour pressure from temperature in degrees celsius.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temp</strong> (<em>float</em>) – Temperature (degrees celsius).</p></li>
<li><p><strong>units_vp</strong> (<em>str</em>) – Units of the vapour pressure to return.
Default is <code class="docutils literal notranslate"><span class="pre">gPressureUnits</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>saturation vapour pressure in the specified or default units.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calculation is in kPa with a conversion at the end to the
required units.</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">metutils</span> <span class="kn">import</span> <span class="n">satVapPr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">satVapPr</span><span class="p">(</span><span class="mf">25.</span><span class="p">)</span>
<span class="go">31.697124349060619</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.spHumToMixRat">
<code class="sig-name descname">spHumToMixRat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">units</span><span class="o">=</span><span class="default_value">'gkg'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.spHumToMixRat" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mixing ratio from specific humidity.
Assumes the input specific humidity variable is in units
of g/kg.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>q</strong> (<em>float</em>) – Specific humidity (any units, assumed g/kg).</p></li>
<li><p><strong>units</strong> (<em>str</em>) – Units of specific humidity, default g/kg.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mixing ratio (kg/kg).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.spHumToRH">
<code class="sig-name descname">spHumToRH</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">tmp</span></em>, <em class="sig-param"><span class="n">prs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.spHumToRH" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate relative humidity from specific humidity, temperature and
pressure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>q</strong> (<em>float</em>) – Specific humidity (g/kg).</p></li>
<li><p><strong>tmp</strong> (<em>float</em>) – Temperature (degrees Celsius).</p></li>
<li><p><strong>prs</strong> (<em>float</em>) – Air pressure (hPa).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Relative humidity (%)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.vapPrToDewPoint">
<code class="sig-name descname">vapPrToDewPoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vp</span></em>, <em class="sig-param"><span class="n">units_vp</span><span class="o">=</span><span class="default_value">'hPa'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.vapPrToDewPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate dew point from vapour pressure (in kPa)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vp</strong> (<em>float</em>) – Input vapour pressure.</p></li>
<li><p><strong>units_vp</strong> (<em>str</em>) – Input units (default <code class="docutils literal notranslate"><span class="pre">gPressureUnits</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dew point temperature (in degrees Kelvin)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.vapPrToMixRat">
<code class="sig-name descname">vapPrToMixRat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">es</span></em>, <em class="sig-param"><span class="n">prs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.vapPrToMixRat" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mixing ratio from vapour pressure
In this function, we (mis)use the symbol es for vapour pressure,
when it correctly represents saturation vapour pressure.
The function can be used for both.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>es</strong> (<em>float</em>) – Vapour pressure.</p></li>
<li><p><strong>prs</strong> (<em>float</em>) – Air pressure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mixing ratio.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.vapPrToRH">
<code class="sig-name descname">vapPrToRH</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vp</span></em>, <em class="sig-param"><span class="n">sat_vp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.vapPrToRH" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate relative humidity from vapour pressure and saturated
vapour pressure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vp</strong> (<em>float</em>) – Vapour pressure (hPa)</p></li>
<li><p><strong>sat_vp</strong> (<em>float</em>) – Saturation vapour pressure (hPa)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Relative humidity (%)</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">metutils</span> <span class="kn">import</span> <span class="n">vapPrToRH</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vapPrToRH</span><span class="p">(</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">30.</span><span class="p">)</span>
<span class="go">33.33333333333</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.vapPrToSpHum">
<code class="sig-name descname">vapPrToSpHum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">es</span></em>, <em class="sig-param"><span class="n">prs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.vapPrToSpHum" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert vapour pressure to specific humidity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>es</strong> (<em>float</em>) – Vapour pressure.</p></li>
<li><p><strong>prs</strong> (<em>float</em>) – Air pressure.</p></li>
</ul>
</dd>
<dt class="field-even">Returs</dt>
<dd class="field-even"><p>Specific humidity.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.vapour">
<code class="sig-name descname">vapour</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">temp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.vapour" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine saturation vapour pressure, given temperature).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>temp</strong> (<em>float</em>) – Air temperature (degrees Celsius)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Saturation vapour pressure (kPa).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.wetBulbGlobeTemp">
<code class="sig-name descname">wetBulbGlobeTemp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t_dp</span></em>, <em class="sig-param"><span class="n">temp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.wetBulbGlobeTemp" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Wet Bulb Globe Temperature from Dew Point Temperature
and Dry Bulb Temperature (same as air temperature).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t_dp</strong> (<em>float</em>) – Dew point temperature (degees Celsius).</p></li>
<li><p><strong>temp</strong> (<em>float</em>) – Air temperature (degrees Celsius).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Wet bulb globe temperature (degrees Celsius).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.wetBulbToDewPoint">
<code class="sig-name descname">wetBulbToDewPoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span></em>, <em class="sig-param"><span class="n">wb</span></em>, <em class="sig-param"><span class="n">elev</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.wetBulbToDewPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Dew Point from dry bulb and wet bulb temperatures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db</strong> (<em>float</em>) – Dry bulb temperature (degrees Celsius).</p></li>
<li><p><strong>wb</strong> (<em>float</em>) – Wet bulb temperature (degrees Celsius).</p></li>
<li><p><strong>elev</strong> (<em>float</em>) – Optional elevation of the observation (metres).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dew point temperature (degrees Kelvin).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.wetBulbToRH">
<code class="sig-name descname">wetBulbToRH</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t_db</span></em>, <em class="sig-param"><span class="n">t_wb</span></em>, <em class="sig-param"><span class="n">elev</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.wetBulbToRH" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate relative humidity from dry bulb and wet bulb temperatures,
and optional elevation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t_db</strong> (<em>float</em>) – Dry bulb temperature (degrees Celsius).</p></li>
<li><p><strong>t_wb</strong> (<em>float</em>) – Wet bulb temperature (degrees Celsius).</p></li>
<li><p><strong>elev</strong> (<em>float</em>) – Elevation (metres).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Relative humidity (%).</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">metutils</span> <span class="kn">import</span> <span class="n">wetBulbToRH</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wetBulbToRH</span><span class="p">(</span><span class="mf">25.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">6.747686</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wetBulbToRH</span><span class="p">(</span><span class="mf">25.</span><span class="p">,</span> <span class="mf">20.</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">63.01954</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.metutils.wetBulbToVapPr">
<code class="sig-name descname">wetBulbToVapPr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">db</span></em>, <em class="sig-param"><span class="n">wb</span></em>, <em class="sig-param"><span class="n">elev</span></em>, <em class="sig-param"><span class="n">units_vp</span><span class="o">=</span><span class="default_value">'hPa'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.metutils.wetBulbToVapPr" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate vapour pressure from dry bulb and wet bulb temperatures,
and optional elevation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db</strong> (<em>float</em>) – Dry bulb temperature (degrees Celsius).</p></li>
<li><p><strong>wb</strong> (<em>float</em>) – Wet bulb temperature (degrees Celsius).</p></li>
<li><p><strong>elev</strong> (<em>float</em>) – Elevation (metres).</p></li>
<li><p><strong>units_vp</strong> (<em>str</em>) – Output units (default <code class="docutils literal notranslate"><span class="pre">gPressureUnits</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Vapour pressure.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.nctools">
<span id="utilities-nctools-module"></span><h2>Utilities.nctools module<a class="headerlink" href="#module-Utilities.nctools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-nctools">
<span id="nctools-netcdf-utility-functions"></span><h3><a class="reference internal" href="#module-nctools" title="nctools: This modlue contains basic utilities for manipulating netCDF format files. It relies on the netCDF4 module (https://code.google.com/p/netcdf4-python/)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nctools</span></code></a> – NetCDF utility functions<a class="headerlink" href="#module-nctools" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.nctools.ncCreateDim">
<code class="sig-name descname">ncCreateDim</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncobj</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">values</span></em>, <em class="sig-param"><span class="n">dtype</span></em>, <em class="sig-param"><span class="n">atts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncCreateDim" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <cite>dimension</cite> instance in a <code class="xref py py-class docutils literal notranslate"><span class="pre">netcdf4.Dataset</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netcdf4.Group</span></code> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncobj</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Group</span></code> instance.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the dimension.</p></li>
<li><p><strong>values</strong> (<em>numpy.ndarray</em>) – Dimension values.</p></li>
<li><p><strong>dtype</strong> (<em>numpy.dtype</em>) – Data type of the dimension.</p></li>
<li><p><strong>atts</strong> (<em>dict</em><em> or </em><em>None</em>) – Attributes to assign to the dimension instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncCreateVar">
<code class="sig-name descname">ncCreateVar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncobj</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">dimensions</span></em>, <em class="sig-param"><span class="n">dtype</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">atts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncCreateVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <cite>Variable</cite> instance in a <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Group</span></code> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncobj</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Group</span></code>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Group</span></code> instance where the variable will be stored.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the variable to be created.</p></li>
<li><p><strong>dimensions</strong> (<em>tuple</em>) – dimension names that define the structure of the variable.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code> data type.</p></li>
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or None.) – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> Array holding the data to be stored.</p></li>
<li><p><strong>atts</strong> (<em>dict</em>) – Dict of attributes to assign to the variable.</p></li>
<li><p><strong>kwargs</strong> – additional keyword args passed directly to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Variable</span></code> constructor</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Variable</span></code> instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Variable</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncFileInfo">
<code class="sig-name descname">ncFileInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">group</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">variable</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dimension</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncFileInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Print summary information about a netCDF file.</p>
<p>Based on ncinfo (<a class="reference external" href="https://code.google.com/p/netcdf4-python/source/browse/trunk/utils/ncinfo">https://code.google.com/p/netcdf4-python/source/browse/trunk/utils/ncinfo</a>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Path to valid netCDF file.</p></li>
<li><p><strong>group</strong> (<em>str</em>) – Name of a <cite>netCDF4.Group</cite> instance to describe.</p></li>
<li><p><strong>variable</strong> (<em>str</em>) – Name of a <cite>netCDF4.Variable</cite> instance to describe.</p></li>
<li><p><strong>dimension</strong> (<em>str</em>) – Name of a <cite>netCDF4.Dimension</cite> instance to describe.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncGetData">
<code class="sig-name descname">ncGetData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncobj</span></em>, <em class="sig-param"><span class="n">var</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncGetData" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data values from a variable in a netCDF file.</p>
<p>Note that the variable object is a better way to manipulate
the variables, as the object includes all attributes (e.g. units,
range, long_name, etc) - use <cite>ncGetVar</cite> for that purpose.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncobj</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">NetCDF4.Dataset</span></code>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">NetCDF4.Dataset</span></code> object.</p></li>
<li><p><strong>var</strong> (<em>str</em>) – Name of the variable in the dataset to extract.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>numpy.masked_array</cite> containing the data of the variable,
with missing values masked.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>numpy.ndarray</cite></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>KeyError</strong> – If variable does not exist in the given file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncGetDims">
<code class="sig-name descname">ncGetDims</code><span class="sig-paren">(</span><em class="sig-param">ncobj</em>, <em class="sig-param">dim</em>, <em class="sig-param">dtype=&lt;class 'float'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncGetDims" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the value of a dimension from a netCDF file. This function
assumes the file is written following the CF convention, with the
values of the dimension stored in a 1-d variable with the same name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncobj</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> object</p></li>
<li><p><strong>dim</strong> (<em>str</em>) – Name of the desired dimension.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code>) – Data type of the dimension</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of the requested dimension.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncGetTimes">
<code class="sig-name descname">ncGetTimes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncobj</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'time'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncGetTimes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the time data from a netcdf file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncobj</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Group</span></code> instance.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the time variable.</p></li>
</ul>
</dd>
<dt class="field-even">Return times</dt>
<dd class="field-even"><p>Array of time dimension values as true Python <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> objects.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncGetVar">
<code class="sig-name descname">ncGetVar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncobj</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncGetVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <cite>netCDF4.variable</cite> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncobj</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF.Group</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF.Dataset</span></code>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF.Group</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF.Dataset</span></code> instance.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the desired variable.</p></li>
</ul>
</dd>
<dt class="field-even">Return varobj</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF.Variable</span></code> instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF.Variable</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncLoadFile">
<code class="sig-name descname">ncLoadFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncLoadFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a netCDF file and return a <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the netCDF file to open.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code> object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.nctools.ncSaveGrid">
<code class="sig-name descname">ncSaveGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">dimensions</span></em>, <em class="sig-param"><span class="n">variables</span></em>, <em class="sig-param"><span class="n">nodata</span><span class="o">=</span><span class="default_value">- 9999</span></em>, <em class="sig-param"><span class="n">datatitle</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gatts</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">writedata</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">keepfileopen</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">zlib</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">complevel</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">lsd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.nctools.ncSaveGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a gridded dataset to a netCDF file using NetCDF4.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Full path to the file to write to.</p></li>
<li><p><strong>dimensions</strong> – <p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>
The input dict ‘dimensions’ has a strict structure, to
permit insertion of multiple dimensions. The dimensions should be keyed
with the slowest varying dimension as dimension 0.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dimesions</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span>
                <span class="s1">&#39;values&#39;</span><span class="p">:</span>
                <span class="s1">&#39;dtype&#39;</span><span class="p">:</span>
                <span class="s1">&#39;atts&#39;</span><span class="p">:{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span>
                        <span class="s1">&#39;units&#39;</span><span class="p">:</span>  <span class="o">...</span><span class="p">}</span> <span class="p">},</span>
             <span class="mi">1</span><span class="p">:{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span>
                <span class="s1">&#39;values&#39;</span><span class="p">:</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span>
                <span class="s1">&#39;atts&#39;</span><span class="p">:{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span>
                        <span class="s1">&#39;units&#39;</span><span class="p">:</span>  <span class="o">...</span><span class="p">}</span> <span class="p">},</span>
                      <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>variables</strong> – <p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>
The input dict ‘variables’ similarly requires a strict structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variables</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span>
                <span class="s1">&#39;dims&#39;</span><span class="p">:</span>
                <span class="s1">&#39;values&#39;</span><span class="p">:</span>
                <span class="s1">&#39;dtype&#39;</span><span class="p">:</span>
                <span class="s1">&#39;atts&#39;</span><span class="p">:{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span>
                        <span class="s1">&#39;units&#39;</span><span class="p">:</span>
                        <span class="o">...</span><span class="p">}</span> <span class="p">},</span>
             <span class="mi">1</span><span class="p">:{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span>
                <span class="s1">&#39;dims&#39;</span><span class="p">:</span>
                <span class="s1">&#39;values&#39;</span><span class="p">:</span>
                <span class="s1">&#39;dtype&#39;</span><span class="p">:</span>
                <span class="s1">&#39;atts&#39;</span><span class="p">:{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span>
                        <span class="s1">&#39;units&#39;</span><span class="p">:</span>
                        <span class="o">...</span><span class="p">}</span> <span class="p">},</span>
                 <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>The value for the ‘dims’ key must be a tuple that is a subset of
the dimensions specified above.</p>
</p></li>
<li><p><strong>nodata</strong> (<em>float</em>) – Value to assign to missing data, default is -9999.</p></li>
<li><p><strong>datatitle</strong> (<em>str</em>) – Optional title to give the stored dataset.</p></li>
<li><p><strong>gatts</strong> (<cite>dict</cite> or None) – Optional dictionary of global attributes to include in the file.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code>) – The data type of the missing value. If not given, infer from other input arguments.</p></li>
<li><p><strong>writedata</strong> (<em>bool</em>) – If true, then the function will write the provided data
(passed in via the variables dict) to the file. Otherwise, no data is
written.</p></li>
<li><p><strong>keepfileopen</strong> (<em>bool</em>) – If True, return a netcdf object and keep the file open, so that data
can be written by the calling program. Otherwise, flush data to disk and close the file.</p></li>
<li><p><strong>zlib</strong> (<em>bool</em>) – If true, compresses data in variables using gzip compression.</p></li>
<li><p><strong>complevel</strong> (<em>integer</em>) – Value between 1 and 9, describing level of compression desired.
Ignored if zlib=False.</p></li>
<li><p><strong>lsd</strong> (<em>integer</em>) – Variable data will be truncated to this number of significant digits.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>netCDF4.Dataset</cite> object (if keepfileopen=True)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Dataset</span></code></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>KeyError</strong> – If input dimension or variable dicts do not have required keys.</p></li>
<li><p><strong>IOError</strong> – If output file cannot be created.</p></li>
<li><p><strong>ValueError</strong> – if there is a mismatch between dimensions and shape of values to write.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.parallel">
<span id="utilities-parallel-module"></span><h2>Utilities.parallel module<a class="headerlink" href="#module-Utilities.parallel" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-parallel">
<span id="parallel-base-parallel-processing-functions"></span><h3><a class="reference internal" href="#module-parallel" title="parallel: Provides a couple of base functions that set up a parallel processing environment. There are only a  small number of parallel processing functions  required for TCRM, so we only need to ensure  those functions are available, either as  the real thing or, if the required modules are  not available, dummy functions that pass straight  through.  We base our parallel processing on :term:`mpi4py`"><code class="xref py py-mod docutils literal notranslate"><span class="pre">parallel</span></code></a> – base parallel processing functions<a class="headerlink" href="#module-parallel" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="Utilities.parallel.DummyCommWorld">
<em class="property">class </em><code class="sig-name descname">DummyCommWorld</code><a class="headerlink" href="#Utilities.parallel.DummyCommWorld" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A dummy COMM_WORLD class that provides the bare
essential methods for running the code. This is used
for basic parallelisation (task distribution).</p>
<p>This is returned only if mpi4py raises an ImportError or 
ModuleNotFoundError.</p>
<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.Get_rank">
<code class="sig-name descname">Get_rank</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.Get_rank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.Get_size">
<code class="sig-name descname">Get_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.Get_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.barrier">
<code class="sig-name descname">barrier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.barrier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.finalize">
<code class="sig-name descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.finalize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.rank">
<em class="property">property </em><code class="sig-name descname">rank</code><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.rank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.parallel.DummyCommWorld.size">
<em class="property">property </em><code class="sig-name descname">size</code><a class="headerlink" href="#Utilities.parallel.DummyCommWorld.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="Utilities.parallel.DummyStatus">
<em class="property">class </em><code class="sig-name descname">DummyStatus</code><a class="headerlink" href="#Utilities.parallel.DummyStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A dummy <cite>Status</cite> class that provides a placeholder 
for the methods that are used to control processing
in parallel implementation</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.parallel.attemptParallel">
<code class="sig-name descname">attemptParallel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.parallel.attemptParallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to load <cite>mpi4py.MPI</cite> globally as <cite>MPI</cite>.  If mpi4py loads
successfully, then a call to <cite>MPI.Finalize</cite> is registered to be
called at exit of the Python interpreter. This is to ensure that
MPI exits cleanly.</p>
<p>If <cite>mpi4py.MPI</cite> cannot be loaded then a dummy <cite>mpi4py.MPI</cite> is created.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An <cite>mpi4py.MPI</cite> object - either a dummy or the real thing</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.parallel.disableOnWorkers">
<code class="sig-name descname">disableOnWorkers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.parallel.disableOnWorkers" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to disable function <cite>f</cite> calculation on workers.
The function will only be evaluated on the master thread.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f</strong> (<em>function</em>) – Function to be wrapped</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.pathLocator">
<span id="utilities-pathlocator-module"></span><h2>Utilities.pathLocator module<a class="headerlink" href="#module-Utilities.pathLocator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-pathLocator">
<span id="pathlocator-determine-directory-one-level-above-the-utilites-folder"></span><h3><a class="reference internal" href="#module-pathLocator" title="pathLocator: A function to determine the directory one level above the Utilities folder. Designed to work even if the code has been compiled with py2exe.  This results in the modules being built-in to the interpreter, so the path of the executable is returned instead."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathLocator</span></code></a> – determine directory one level above the Utilites folder<a class="headerlink" href="#module-pathLocator" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.pathLocator.getRootDirectory">
<code class="sig-name descname">getRootDirectory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.pathLocator.getRootDirectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the path one level above the directory of this current
file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Path name one level above this.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.pathLocator.is_frozen">
<code class="sig-name descname">is_frozen</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.pathLocator.is_frozen" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if modules have been built into the interpreter, e.g. by
py2exe.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><cite>True</cite> if the modules are frozen, <cite>False</cite> otherwise.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.process">
<span id="utilities-process-module"></span><h2>Utilities.process module<a class="headerlink" href="#module-Utilities.process" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-process">
<span id="process-control-processing-of-files"></span><h3><a class="reference internal" href="#module-process" title="process: Provides functions to control processing of files. The module records details of each file processed in a text file, which can then be looked up at a later time to determin if a file has previously been processed. It uses the MD5 checksum value of the file as the primary indicator of modifications to a file."><code class="xref py py-mod docutils literal notranslate"><span class="pre">process</span></code></a> – control processing of files<a class="headerlink" href="#module-process" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.process.pAlreadyProcessed">
<code class="sig-name descname">pAlreadyProcessed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">attribute</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pAlreadyProcessed" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a file has already been processed (i.e. it is stored in
GLOBAL_PROCFILES)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>) – Base path of the file being checked.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file.</p></li>
<li><p><strong>attribute</strong> (<em>str</em>) – Attribute name to be checked.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Value of the attribute to be tested.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the value matches that stored in GLOBAL_PROCFILES,
False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pArchiveDateFormat">
<code class="sig-name descname">pArchiveDateFormat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date_format</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pArchiveDateFormat" title="Permalink to this definition">¶</a></dt>
<dd><p>Set or get archive date format. Archived files can optionally have
a date string inserted into the filename to retain all files with
the same name, but different timestamps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date_format</strong> (<em>str</em>) – archive date format (if setting it)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>archive date format</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pArchiveDir">
<code class="sig-name descname">pArchiveDir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">archive_dir</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pArchiveDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Set or get the archive directory. If setting the directory, its
existence is checked and the directory is created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>archive_dir</strong> (<em>str</em>) – Archive directory (if setting it).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The archive directory.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>OSError</strong> – if the directory cannot be created</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pArchiveFile">
<code class="sig-name descname">pArchiveFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pArchiveFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the file to the archive directory (if specified), inserting a
timestamp in the name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Full path of the file to be archived.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> if the file is successfully moved, <cite>False</cite> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pArchiveTimestamp">
<code class="sig-name descname">pArchiveTimestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pArchiveTimestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Set or get archive timstamp flag. If the flag is <cite>True</cite>, then
files that are to be archived will have a timestamp inserted into
the file name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamp</strong> (<em>bool</em>) – <cite>True</cite> or <cite>False</cite> (if setting it)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of <cite>GLOBAL_TIMESTAMP</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pDeleteDatFile">
<code class="sig-name descname">pDeleteDatFile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pDeleteDatFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the existing data file - defined in the <cite>GLOBAL_DATFILE</cite> variable
(list of previously-processed files).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if existing dat file successfully deleted,
False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pGetProcessedEntry">
<code class="sig-name descname">pGetProcessedEntry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">attribute</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pGetProcessedEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the value of an attribute for a file from the
GLOBAL_PROCFILES dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>) – Path name of the file.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – File name to retrieve the details of.</p></li>
<li><p><strong>attribute</strong> (<em>str</em>) – Attribute to retrieve.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Attribute value</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pGetProcessedFiles">
<code class="sig-name descname">pGetProcessedFiles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">datFileName</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pGetProcessedFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of processed files from a dat file. This will also
set the global <cite>GLOBAL_DATFILE</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>datFileName</strong> (<em>str</em>) – Name of a data file to read from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successfully read the data file, False
otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pMoveFile">
<code class="sig-name descname">pMoveFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">origin</span></em>, <em class="sig-param"><span class="n">destination</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pMoveFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Move a single file to an archive directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> (<em>str</em>) – Full path of the file to be moved.</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – Full path of the file destination.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> if the file is successfully moved, <cite>False</cite> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pSetProcessedEntry">
<code class="sig-name descname">pSetProcessedEntry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">attribute</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pSetProcessedEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the attribute of the given file with the given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>) – Base directory of the file.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – File name.</p></li>
<li><p><strong>attribute</strong> (<em>str</em>) – Name of the file attribute to be updated.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – Attribute value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.process.pWriteProcessedFile">
<code class="sig-name descname">pWriteProcessedFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.process.pWriteProcessedFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the various attributes of the given file to <cite>GLOBAL_DATFILE</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Name of file that has been processed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the attributes of the file are successfully
stored in GLOBAL_PROCFILES and written to GLOBAL_DATFILE, False
otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.progressbar">
<span id="utilities-progressbar-module"></span><h2>Utilities.progressbar module<a class="headerlink" href="#module-Utilities.progressbar" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-progressbar">
<span id="progressbar-display-progress-on-stdout"></span><h3><a class="reference internal" href="#module-progressbar" title="progressbar: print a progress bar on to standard output."><code class="xref py py-mod docutils literal notranslate"><span class="pre">progressbar</span></code></a> – display progress on STDOUT<a class="headerlink" href="#module-progressbar" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="Utilities.progressbar.ProgressBar">
<em class="property">class </em><code class="sig-name descname">ProgressBar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modname</span></em>, <em class="sig-param"><span class="n">showbar</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.progressbar.ProgressBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="Utilities.progressbar.ProgressBar.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">progress</span></em>, <em class="sig-param"><span class="n">startPos</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">endPos</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.progressbar.ProgressBar.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="Utilities.progressbar.SimpleProgressBar">
<em class="property">class </em><code class="sig-name descname">SimpleProgressBar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modname</span></em>, <em class="sig-param"><span class="n">showbar</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.progressbar.SimpleProgressBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#Utilities.progressbar.ProgressBar" title="Utilities.progressbar.ProgressBar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Utilities.progressbar.ProgressBar</span></code></a></p>
<dl class="py method">
<dt id="Utilities.progressbar.SimpleProgressBar.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">progress</span></em>, <em class="sig-param"><span class="n">startPos</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">endPos</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">incr</span><span class="o">=</span><span class="default_value">5.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.progressbar.SimpleProgressBar.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.shptools">
<span id="utilities-shptools-module"></span><h2>Utilities.shptools module<a class="headerlink" href="#module-Utilities.shptools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="shptools-helper-functions-for-manipulating-shape-files">
<h3><code class="xref py py-mod docutils literal notranslate"><span class="pre">shptools</span></code> - helper functions for manipulating shape files<a class="headerlink" href="#shptools-helper-functions-for-manipulating-shape-files" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.shptools.parseData">
<code class="sig-name descname">parseData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.parseData" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a dict of dicts to generate a list of lists describing
the fields, and an array of the corresponding data records</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – a dict of dicts with field names as keys, and each
sub-dict containing keys of ‘Type’, ‘Length’,
‘Precision’ and ‘Data’.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>fields, records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.shpCreateFile">
<code class="sig-name descname">shpCreateFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outputFile</span></em>, <em class="sig-param"><span class="n">shapes</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">shpType</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.shpCreateFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a shapefile of the give type, containing the given fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputFile</strong> (<em>str</em>) – full path (excluding extension!) to the shapefile
to create.</p></li>
<li><p><strong>shapes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">shapefile._Shape</span></code>) – Collection of shape objects representing the geometry of
features.</p></li>
<li><p><strong>shptype</strong> (<em>int</em>) – <code class="xref py py-class docutils literal notranslate"><span class="pre">shapefile</span></code> object type (these are integer
values, but you can also use the shapelib.SHPT value).</p></li>
<li><p><strong>fields</strong> (<em>dict</em>) – a dictionary of dictionaries with field names as
keys, and each sub-dictionary containing keys of ‘Type’,
‘Length’,’Precision’ and ‘Data’:
‘Type’ must be one of the following integer values:
0 - strings
1 - integers
2 - doubles
4 - Invalid</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">shapefile.ShapefileException</span></code> if unable to write the file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.shpGetField">
<code class="sig-name descname">shpGetField</code><span class="sig-paren">(</span><em class="sig-param">shape_file</em>, <em class="sig-param">field_name</em>, <em class="sig-param">dtype=&lt;class 'float'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.shpGetField" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract from the records the value of the field corresponding
to fieldname.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shpFile</strong> (<em>str</em>) – path to a valid shape file</p></li>
<li><p><strong>fieldname</strong> (<em>str</em>) – name of a field in the attribute table of the
shape file (.dbf)</p></li>
<li><p><strong>dtype</strong> (<cite>dtype</cite>) – type of values in the requested field. Default is
float</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the value of the given field for each feature</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array or list (if <cite>dtype</cite> is a string)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.shpGetVertices">
<code class="sig-name descname">shpGetVertices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shape_file</span></em>, <em class="sig-param"><span class="n">key_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.shpGetVertices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of arrays containing coordinate pairs
representing vertices contained in the shapefile.</p>
<p>Dictionary keys can either be a field contained within the
corresponding dbf file (through the optional kwarg keyName), or if
no key name is provided, the object id number (i.e. the record
number) is used.</p>
<p>WARNING:
If any records share the same value for the chosen key, then only
one record will be retained in the returned values.</p>
<p>Input:
:type  shape_file: str
:param shape_file: path to a shape file, excluding the extension</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key_name</strong> (<em>optional str</em>) – name of a field in the shape file that
acts as a key for the dictionary of returned
vertices</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict keyed by object id number or optionally a field
name, with values being arrays of vertices of the
corresponding shape object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p>Example: vertices = shpGetVertices(‘/foo/bar/baz/shp’, ‘FIELD1’)</p>
<p>This function is retained for backwards compatibility.
We recommend using the shapefile interface directly for extracting
shapes and records.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.shpReadShapeFile">
<code class="sig-name descname">shpReadShapeFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shape_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.shpReadShapeFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the vertices and records for the given shape file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>shape_file</strong> (<em>str</em>) – path of input shape file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vertices</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>records</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.shpSaveTrackFile">
<code class="sig-name descname">shpSaveTrackFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outputFile</span></em>, <em class="sig-param"><span class="n">tracks</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">'point'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.shpSaveTrackFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Save track data to shapefile. The fields are sorted using the same
function as in shpCreateFile, so the fields should be in the correct
order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputFile</strong> (<em>str</em>) – name for the output shapefile, excluding extension.</p></li>
<li><p><strong>tracks</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> object) – collection of track features.</p></li>
<li><p><strong>format</strong> – Type of features to save. “point” will save each record as a
single point. “lines” will save each individual TC track as
a single (POLYLINE) feature. “segments” will save each
segment of a track to a line feature between consecutive
observations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.shpWriteShapeFile">
<code class="sig-name descname">shpWriteShapeFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outputFile</span></em>, <em class="sig-param"><span class="n">shpType</span></em>, <em class="sig-param"><span class="n">fields</span></em>, <em class="sig-param"><span class="n">shapes</span></em>, <em class="sig-param"><span class="n">records</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.shpWriteShapeFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Save data to a shapefile. The fields are sorted using the same
function as in shpCreateFile, so the fields should be in the correct
order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputFile</strong> – A dbf file object created by shpCreateFile</p></li>
<li><p><strong>shpType</strong> – The type of features to be created.</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – A dictionary of dictionaries with field names as
keys, and each sub-dictionary containing keys of ‘Type’,
‘Length’,’Precision’ and ‘Data’
‘Type’ must be one of the following integer values:
0 - strings
1 - integers
2 - doubles
4 - Invalid</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">shapefile.ShapefileException</span></code> if unable to write the file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.tracks2line">
<code class="sig-name descname">tracks2line</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tracks</span></em>, <em class="sig-param"><span class="n">outputFile</span></em>, <em class="sig-param"><span class="n">dissolve</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.tracks2line" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes tracks to a shapefile as a collection of line features</p>
<p>If dissolve==True, then each track feature is written as a
single polyline feature, otherwise each track segment is
stored as a separate feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tracks</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects) – <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> features to store in a shape file</p></li>
<li><p><strong>outputFile</strong> (<em>str</em>) – Path to output file destination</p></li>
<li><p><strong>dissolve</strong> (<em>boolean</em>) – Store track features or track segments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.shptools.tracks2point">
<code class="sig-name descname">tracks2point</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tracks</span></em>, <em class="sig-param"><span class="n">outputFile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.shptools.tracks2point" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes tracks to a shapefile as a collection of point features</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tracks</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects) – <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> features to store in a shape file</p></li>
<li><p><strong>outputFile</strong> (<em>str</em>) – Path to output file destination</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.smooth">
<span id="utilities-smooth-module"></span><h2>Utilities.smooth module<a class="headerlink" href="#module-Utilities.smooth" title="Permalink to this headline">¶</a></h2>
<div class="section" id="smooth-smooth-a-2d-field-using-a-gaussian-filter">
<h3><code class="xref py py-mod docutils literal notranslate"><span class="pre">smooth</span></code> – smooth a 2D field using a Gaussian filter<a class="headerlink" href="#smooth-smooth-a-2d-field-using-a-gaussian-filter" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.smooth.gaussKern">
<code class="sig-name descname">gaussKern</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.smooth.gaussKern" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a normalised Gaussian kernel to apply as a smoothing
function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em>) – the size of the kernel to use (how many points will be
used in the smoothing operation).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> normalised 2D kernel array for use in
convolutions</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.smooth.smooth">
<code class="sig-name descname">smooth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">im</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">15</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.smooth.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooth a 2D array <cite>im</cite> by convolving with a Gaussian kernel of size <cite>n</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – Array of values to be smoothed</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Number of points to include in the smoothing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>smoothed array (same dimensions as the input array)</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.stats">
<span id="utilities-stats-module"></span><h2>Utilities.stats module<a class="headerlink" href="#module-Utilities.stats" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-stats">
<span id="stats-helper-functions-for-statistical-methods"></span><h3><a class="reference internal" href="#module-stats" title="stats: Miscellaneous tools required for statistics-related classes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stats</span></code></a> – helper functions for statistical methods<a class="headerlink" href="#module-stats" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.stats.bandwidth">
<code class="sig-name descname">bandwidth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.bandwidth" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the bandwidth for a kernel density estimation, using the 
normal reference method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of float values</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Float value of the “optimum” bandwidth for the kernel 
density estimate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.between">
<code class="sig-name descname">between</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">minval</span></em>, <em class="sig-param"><span class="n">maxval</span></em>, <em class="sig-param"><span class="n">fuzz</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">inclusive</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.between" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a value is within some range with some fuzziness at the edges
to allow for floating point noise.</p>
<p>The fuzziness is implemented by expanding the range at each end <cite>fuzz</cite> steps
using the numpy.nextafter function. For example, with the inputs
minval = 1, maxval = 2, and fuzz = 2; the range would be expanded to
minval = 0.99999999999999978 and maxval = 2.0000000000000009 before doing
comparisons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<em>float</em>) – Value being tested.</p></li>
<li><p><strong>minval</strong> (<em>float</em>) – Lower bound of range. Must be lower than <cite>maxval</cite>.</p></li>
<li><p><strong>maxval</strong> (<em>float</em>) – Upper bound of range. Must be higher than <cite>minval</cite>.</p></li>
<li><p><strong>fuzz</strong> (<em>int</em>) – Number of times to expand bounds using <cite>numpy.nextafter</cite>.</p></li>
<li><p><strong>inclusive</strong> (<em>boolean</em>) – Set whether endpoints are within the range.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if <cite>val</cite> is between <cite>minval</cite> and <cite>maxval</cite>, false otherwise.</p>
</dd>
</dl>
<p>From <a class="reference external" href="http://penandpants.com/category/python/numpy/">http://penandpants.com/category/python/numpy/</a></p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.cdf">
<code class="sig-name descname">cdf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Cumulative Density Function extracted from cdf_lin.m</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.cdf2d">
<code class="sig-name descname">cdf2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.cdf2d" title="Permalink to this definition">¶</a></dt>
<dd><p>2D Cumulative Density Function extracted from cdf2d.m
Assumes the grid is uniformly defined, i.e. dx and dy are
constant.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.circmean">
<code class="sig-name descname">circmean</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">samples</span></em>, <em class="sig-param"><span class="n">high</span><span class="o">=</span><span class="default_value">6.283185307179586</span></em>, <em class="sig-param"><span class="n">low</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.circmean" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the circular mean for samples assumed to be in the range
[low to high]</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.circstd">
<code class="sig-name descname">circstd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">samples</span></em>, <em class="sig-param"><span class="n">high</span><span class="o">=</span><span class="default_value">6.283185307179586</span></em>, <em class="sig-param"><span class="n">low</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.circstd" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the circular standard deviation for samples assumed to be
in the range [low to high]</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.circvar">
<code class="sig-name descname">circvar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">samples</span></em>, <em class="sig-param"><span class="n">high</span><span class="o">=</span><span class="default_value">6.283185307179586</span></em>, <em class="sig-param"><span class="n">low</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.circvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the circular variance for samples assumed to be in the range
[low to high]</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.getCellLonLat">
<code class="sig-name descname">getCellLonLat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cellNum</span></em>, <em class="sig-param"><span class="n">gridLimit</span></em>, <em class="sig-param"><span class="n">gridSpace</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.getCellLonLat" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the lon/lat of a given cell, based on gridLimit and gridSpace</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.getCellNum">
<code class="sig-name descname">getCellNum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">gridLimit</span></em>, <em class="sig-param"><span class="n">gridSpace</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.getCellNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the cell number given longitude and latititude</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.getOccurence">
<code class="sig-name descname">getOccurence</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">occurList</span></em>, <em class="sig-param"><span class="n">indList</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.getOccurence" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array of indices corresponding to cyclone observations that</p>
</dd></dl>

<dl class="py data">
<dt id="Utilities.stats.logger">
<code class="sig-name descname">logger</code><em class="property"> = &lt;RootLogger root (WARNING)&gt;</em><a class="headerlink" href="#Utilities.stats.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Functions:</p>
<dl class="simple">
<dt>cdf(x,y)<span class="classifier">1D array of float</span></dt><dd><p>Cumulative Density Function extracted from cdf_lin.m</p>
</dd>
<dt>cdf2d(x,y,z): 2D array of float</dt><dd><p>2D Cumulative Density Function extracted from cdf2d.m</p>
</dd>
<dt>getCellNum(lon, lat, gridLimit, gridSpace): int</dt><dd><p>Determine the cell number based on the lat/lon, the grid bounds
and the grid spacing.</p>
</dd>
<dt>getCellLonLat(cellNum, gridLimit, gridSpace): 2D float</dt><dd><p>Determine the lat/lon  of the northwestern corner of
cellNum</p>
</dd>
<dt>validCellNum(cellNum, gridLimit, gridSpace): boolean</dt><dd><p>Determine whether the given cell number can exist within
the bounds of the region defined by gridSpace and gridLimit</p>
</dd>
<dt>maxCellNum(gridLimit, gridSpace): int</dt><dd><p>Determine maximum cell number based on grid limits and spacing.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.maxCellNum">
<code class="sig-name descname">maxCellNum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gridLimit</span></em>, <em class="sig-param"><span class="n">gridSpace</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.maxCellNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get maximum cell number based on grid and grid space</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.probability">
<code class="sig-name descname">probability</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">return_period</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.probability" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an annual probability given a return period</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.rMaxDist">
<code class="sig-name descname">rMaxDist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mean</span></em>, <em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">maxrad</span><span class="o">=</span><span class="default_value">200.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.rMaxDist" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on the logarithmic distribution reported by Willoughby &amp; Rahn (2004)</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.statCellFraction">
<code class="sig-name descname">statCellFraction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gridLimit</span></em>, <em class="sig-param"><span class="n">gridSpace</span></em>, <em class="sig-param"><span class="n">valueFile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.statCellFraction" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fractional value of each grid cell, based on the
values stored in valueFile.
:param dict gridLimit: Dictionary of bounds of the grid.
:param dict gridSpace: Resolution of the grid to calculate values.
:param str valueFile: Path to the ascii grid file containing values to sample.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of fractional values, with length equal to the number
of cells</p>
</dd>
</dl>
<p>Notes: Still need to include bounds checking to ensure the valueFile
data actually covers the gridLimits.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.statMaxRange">
<code class="sig-name descname">statMaxRange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minval</span></em>, <em class="sig-param"><span class="n">maxval</span></em>, <em class="sig-param"><span class="n">step</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.statMaxRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the maximum value in a range
used for arranging the cells to be evenly spaced</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.statMinRange">
<code class="sig-name descname">statMinRange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minval</span></em>, <em class="sig-param"><span class="n">maxval</span></em>, <em class="sig-param"><span class="n">step</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.statMinRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the minimum value in a range
Used for arranging the cells to be evenly spaced</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.statRemoveNum">
<code class="sig-name descname">statRemoveNum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">Num</span><span class="o">=</span><span class="default_value">9223372036854775807</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.statRemoveNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all elements in an array for which value is Num</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.stats.validCellNum">
<code class="sig-name descname">validCellNum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cellNum</span></em>, <em class="sig-param"><span class="n">gridLimit</span></em>, <em class="sig-param"><span class="n">gridSpace</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.stats.validCellNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the given cell number is valid</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.tcrandom">
<span id="utilities-tcrandom-module"></span><h2>Utilities.tcrandom module<a class="headerlink" href="#module-Utilities.tcrandom" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tcrandom-extended-version-of-python-s-random-library">
<h3><code class="xref py py-mod docutils literal notranslate"><span class="pre">tcrandom</span></code> – extended version of Python’s <code class="xref py py-class docutils literal notranslate"><span class="pre">random</span></code> library<a class="headerlink" href="#tcrandom-extended-version-of-python-s-random-library" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="Utilities.tcrandom.Random">
<em class="property">class </em><code class="sig-name descname">Random</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seed</span></em>, <em class="sig-param"><span class="n">stream</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tcrandom.Random" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Pseudorandom number generator.</p>
<p>Expect each simulation to instantiate this class with the same
seed integer, and with a unique stream integer (drawn from e.g. an
enumeration of all the simulations)</p>
<dl class="py method">
<dt id="Utilities.tcrandom.Random.logisticvariate">
<code class="sig-name descname">logisticvariate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mu</span></em>, <em class="sig-param"><span class="n">sigma</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tcrandom.Random.logisticvariate" title="Permalink to this definition">¶</a></dt>
<dd><p>Random variate from the logistic distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mu</strong> (<em>float</em>) – Location parameter (μ real).</p></li>
<li><p><strong>sigma</strong> (<em>float</em>) – Scale parameter (σ &gt; 0).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A random variate from the logistic distribution.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.tcrandom.Random.lognormvariate">
<code class="sig-name descname">lognormvariate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xi</span></em>, <em class="sig-param"><span class="n">mu</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">sigma</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tcrandom.Random.lognormvariate" title="Permalink to this definition">¶</a></dt>
<dd><p>Random variate from the lognormal distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xi</strong> (<em>float</em>) – Shape parameter</p></li>
<li><p><strong>mu</strong> (<em>float</em>) – Location parameter</p></li>
<li><p><strong>sigma</strong> (<em>float</em>) – Scale paramter (σ &gt; 0)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A random variate from the lognormal distribution</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.tcrandom.Random.normalvariate">
<code class="sig-name descname">normalvariate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">loc</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">shape</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tcrandom.Random.normalvariate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.tcrandom.Random.random">
<code class="sig-name descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tcrandom.Random.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="Utilities.tcrandom.Random.uniform">
<code class="sig-name descname">uniform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">low</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">high</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">shape</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tcrandom.Random.uniform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.template">
<span id="utilities-template-module"></span><h2>Utilities.template module<a class="headerlink" href="#module-Utilities.template" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-template">
<span id="template-replace-strings-with-another-value"></span><h3><a class="reference internal" href="#module-template" title="template: Read in a text file, with formatted elements and replace with strings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">template</span></code></a> – replace strings with another value<a class="headerlink" href="#module-template" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.template.replace">
<code class="sig-name descname">replace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">infile</span></em>, <em class="sig-param"><span class="n">outfile</span></em>, <em class="sig-param"><span class="n">replacements</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.template.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace all instances of the keys with values in infile and w
write to outfile.</p>
<p>In the input file, keywords to be replaced should be written
as ‘{keyword}’.</p>
<p>e.g. if infile has a line containing a formatted keyword:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Input</span> <span class="o">=</span> <span class="p">{</span><span class="n">PATH</span><span class="p">}</span>
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">replacements</span> <span class="pre">=</span> <span class="pre">dict('PATH':</span> <span class="pre">'/foo/baz')</span></code>, then the
output file will be written as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Input</span> <span class="o">=</span> <span class="o">/</span><span class="n">foo</span><span class="o">/</span><span class="n">baz</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>infile</strong> (<em>str</em>) – Path to an input file.</p></li>
<li><p><strong>outfile</strong> (<em>str</em>) – Destination file to be written.</p></li>
<li><p><strong>replacements</strong> (<em>dict</em>) – A set of key-value pairs that dictate
the replacements to occur in the input file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.timeseries">
<span id="utilities-timeseries-module"></span><h2>Utilities.timeseries module<a class="headerlink" href="#module-Utilities.timeseries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="timeseries-extract-timeseries-from-each-timestep-of-a-simulation">
<h3><code class="xref py py-mod docutils literal notranslate"><span class="pre">timeseries</span></code> - Extract timeseries from each timestep of a simulation<a class="headerlink" href="#timeseries-extract-timeseries-from-each-timestep-of-a-simulation" title="Permalink to this headline">¶</a></h3>
<p>Extract station timeseries from each timestep of a simulation.
This samples the regional wind speed, not the site-specific wind speed.
To include site-specific effects, you will first need to include the
multiplier values for each site in the station file, then run
tsmultipliers.py to apply said multipliers to the output.</p>
<dl class="py class">
<dt id="Utilities.timeseries.Station">
<em class="property">class </em><code class="sig-name descname">Station</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stationid</span></em>, <em class="sig-param"><span class="n">longitude</span></em>, <em class="sig-param"><span class="n">latitude</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.timeseries.Station" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Station:</p>
<dl class="simple">
<dt>Description: An object to represent a location for which time series </dt><dd><p>data will be extracted</p>
</dd>
</dl>
<p>Members:
<cite>id</cite>: Unique id string for the station
<cite>lon</cite>: Longitude of the station (geographic coordinates)
<cite>lat</cite>: Latitude of the station (geographic coordinates)
<cite>data</cite>: A <cite>DynamicRecArray</cite> to hold the time series data</p>
<p>Methods:
<cite>insideGrid</cite>: Determine if the station is inside the simulation domain.</p>
<dl class="py method">
<dt id="Utilities.timeseries.Station.insideGrid">
<code class="sig-name descname">insideGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gridx</span></em>, <em class="sig-param"><span class="n">gridy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.timeseries.Station.insideGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a point is within the defined grid</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="Utilities.timeseries.Timeseries">
<em class="property">class </em><code class="sig-name descname">Timeseries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">configFile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.timeseries.Timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Timeseries:</p>
<p>Description: Extract data at a set of :class:<a href="#id1"><span class="problematic" id="id2">`</span></a>Station`s</p>
<p>Parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>configFile</strong> (<em>str</em>) – Path to a TCRM configuration file</p>
</dd>
</dl>
<p>Members:
<cite>meta</cite>: Boolean whether additional metadata is attached to the <cite>Station`s
`outputPath</cite>: Directory where extracted data will be stored in csv-format files
<cite>minfile</cite>: Name of the file where minima for all <a href="#id3"><span class="problematic" id="id4">`</span></a>Station`s will be stored.</p>
<blockquote>
<div><p>This will be the <cite>outputPath</cite> folder</p>
</div></blockquote>
<p><cite>maxfile</cite>: As above, but for maxima (e.g. maximum wind speeds)
<cite>stations</cite>: A list of <cite>Station</cite> objects, read from a file containing details of the stations</p>
<p>Methods:</p>
<p>Internal methods:</p>
<dl class="py method">
<dt id="Utilities.timeseries.Timeseries.extract">
<code class="sig-name descname">extract</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em>, <em class="sig-param"><span class="n">spd</span></em>, <em class="sig-param"><span class="n">uu</span></em>, <em class="sig-param"><span class="n">vv</span></em>, <em class="sig-param"><span class="n">prs</span></em>, <em class="sig-param"><span class="n">gridx</span></em>, <em class="sig-param"><span class="n">gridy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.timeseries.Timeseries.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data from the grid at the given locations.
Data is stored in a dictionary, with keys as the station id’s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tstep</strong> (<em>float</em>) – time step being evaluated, as a float (output
from matplotlib.num2date)</p></li>
<li><p><strong>spd</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of speed values.</p></li>
<li><p><strong>uu</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of eastward wind speed values.</p></li>
<li><p><strong>vv</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of northward wind speed values.</p></li>
<li><p><strong>prs</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of pressure values.</p></li>
<li><p><strong>gridx</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of grid longitudes.</p></li>
<li><p><strong>gridy</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of grid latitudes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.timeseries.Timeseries.sample">
<code class="sig-name descname">sample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lon</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">spd</span></em>, <em class="sig-param"><span class="n">uu</span></em>, <em class="sig-param"><span class="n">vv</span></em>, <em class="sig-param"><span class="n">prs</span></em>, <em class="sig-param"><span class="n">gridx</span></em>, <em class="sig-param"><span class="n">gridy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.timeseries.Timeseries.sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract values from 2-dimensional grids at the given lat/lon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lon</strong> (<em>float</em>) – Longitude of the point to extract.</p></li>
<li><p><strong>lat</strong> (<em>float</em>) – Latitude of the point to extract.</p></li>
<li><p><strong>spd</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of speed values.</p></li>
<li><p><strong>uu</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of eastward wind speed values.</p></li>
<li><p><strong>vv</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of northward wind speed values.</p></li>
<li><p><strong>prs</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of pressure values.</p></li>
<li><p><strong>gridx</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of grid longitudes.</p></li>
<li><p><strong>gridy</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of grid latitudes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>speed, esatward and northward wind components, and pressure
values at the given location</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.timeseries.Timeseries.shutdown">
<code class="sig-name descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.timeseries.Timeseries.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the data to file, each station to a separate file.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.track">
<span id="utilities-track-module"></span><h2>Utilities.track module<a class="headerlink" href="#module-Utilities.track" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-tracks">
<span id="track-track-related-attributes-and-functions"></span><h3><code class="xref py py-mod docutils literal notranslate"><span class="pre">track</span></code> - track-related attributes and functions<a class="headerlink" href="#module-tracks" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="Utilities.track.Track">
<em class="property">class </em><code class="sig-name descname">Track</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.Track" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A single tropical cyclone track.</p>
<p>The object exposes the track data through the object attributes.
For example, If <cite>data</cite> contains the tropical cyclone track data
(<cite>numpy.array</cite>) loaded with the <a class="reference internal" href="#Utilities.track.readTrackData" title="Utilities.track.readTrackData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">readTrackData()</span></code></a> function,
then the central pressure column can be printed out with the
code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Track</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">CentralPressure</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>numpy.ndarray</em>) – the tropical cyclone track data.</p>
</dd>
</dl>
<dl class="py method">
<dt id="Utilities.track.Track.inRegion">
<code class="sig-name descname">inRegion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gridLimit</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.Track.inRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the tropical cyclone track starts within a region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gridLimit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – the region to check.
The <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> should contain the keys
<code class="xref py py-attr docutils literal notranslate"><span class="pre">xMin</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">xMax</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">yMin</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">yMax</span></code>. The <em>x</em> variable bounds the
latitude and the <em>y</em> variable bounds the
longitude.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.track.Track.minimumDistance">
<code class="sig-name descname">minimumDistance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">points</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.Track.minimumDistance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the minimum distance between a track and a
collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">shapely.geometry.Point</span></code> points. Assumes
the points and the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Longitude</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">Latitude</span></code>
attributes share the same coordinate system (presumed to be
geographic coordinates).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>points</strong> – sequence of <code class="xref py py-class docutils literal notranslate"><span class="pre">shapely.geometry.Point</span></code> objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> of minimum distances between
the set of points and the line features (in km).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="Utilities.track.WindowsError">
<em class="property">exception </em><code class="sig-name descname">WindowsError</code><a class="headerlink" href="#Utilities.track.WindowsError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OSError</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.loadTracks">
<code class="sig-name descname">loadTracks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trackfile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.loadTracks" title="Permalink to this definition">¶</a></dt>
<dd><p>Read tracks from a track .nc file and return a list of <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a>
objects.</p>
<p>This calls the function <cite>ncReadTrackData</cite> to parse the track .nc file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trackfile</strong> (<em>str</em>) – the track data filename.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.loadTracksFromFiles">
<code class="sig-name descname">loadTracksFromFiles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trackfiles</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.loadTracksFromFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator that yields <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects from a list of track
filenames.</p>
<p>When run in parallel, the list <cite>trackfiles</cite> is distributed across the MPI
processors using the <cite>balanced</cite> function. Track files are loaded in a lazy
fashion to reduce memory consumption. The generator returns individual
tracks (recall: a trackfile can contain multiple tracks) and only moves on
to the next file once all the tracks from the current file have been
returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trackfiles</strong> (<em>list of strings</em>) – list of track filenames. The filenames must include the
path to the file.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>TypeError if input argument is not a list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.loadTracksFromPath">
<code class="sig-name descname">loadTracksFromPath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.loadTracksFromPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to obtain a generator that yields <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects
from a directory containing track .csv files.</p>
<p>This function calls <cite>loadTracksFromFiles</cite> to obtain the generator and track
filenames are processed in alphabetical order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – the directory path.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>IOError if the path does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.ncReadTrackData">
<code class="sig-name descname">ncReadTrackData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trackfile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.ncReadTrackData" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a netcdf-format track file into a collection of
<a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects. The returned <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects <em>must</em>
have all attributes accessed by the <cite>__getattr__</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trackfile</strong> (<em>str</em>) – track data filename (netCDF4 format).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>track data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.ncSaveTracks">
<code class="sig-name descname">ncSaveTracks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trackfile</span></em>, <em class="sig-param"><span class="n">tracks</span></em>, <em class="sig-param"><span class="n">timeunits</span><span class="o">=</span><span class="default_value">'hours since 1900-01-01 00:00'</span></em>, <em class="sig-param"><span class="n">calendar</span><span class="o">=</span><span class="default_value">'standard'</span></em>, <em class="sig-param"><span class="n">attributes</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.ncSaveTracks" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a collection of <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects to a netCDF file. This
makes use of netCDF4 compound data types to store the data as a
structure akin to a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.recarray</span></code>. Each track in the
collection is stored as a separate <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.Group</span></code> instance
in the output file.</p>
<p>The <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects hold datetime information as an array
of <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> objects - there is no equivalent
data type in netCDF4, so the datetime information is converted to
floats using the <code class="xref py py-class docutils literal notranslate"><span class="pre">netCDF4.date2num</span></code> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trackfile</strong> (<em>str</em>) – Path to the file to save data to.</p></li>
<li><p><strong>tracks</strong> (<em>list</em>) – Collection of <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects.</p></li>
<li><p><strong>timeunits</strong> (<em>str</em>) – A string of the form ‘<em>time units</em> since
<em>reference time</em>’ describing the time units.
Default is ‘hours since 1900-01-01 00:00’.</p></li>
<li><p><strong>calendar</strong> (<em>str</em>) – Calendar used for time calculations. Valid calendars
are ‘standard’, ‘gregorian’, ‘proleptic_gregorian’,
‘noleap’, ‘365_day’, ‘360_day’, ‘julian’, ‘all_leap’,
‘366_day’. Default is ‘standard’, which is a mixed
Julian/Gregorian calendar.</p></li>
<li><p><strong>attributes</strong> (<em>dict</em>) – Global attributes to add to the file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.readMultipleTrackData">
<code class="sig-name descname">readMultipleTrackData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trackfile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.readMultipleTrackData" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads all the track datas from a .csv file into a list of numpy.ndarrays.
The tracks are seperated based in their cyclone id. This function calls
<cite>readTrackData</cite> to read the data from the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trackfile</strong> (<em>str</em>) – the track data filename.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a collection of <a class="reference internal" href="#Utilities.track.Track" title="Utilities.track.Track"><code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code></a> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.track.readTrackData">
<code class="sig-name descname">readTrackData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trackfile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.track.readTrackData" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a track .csv file into a numpy.ndarray.</p>
<p>The track format and converters are specified with the global variables</p>
<blockquote>
<div><p>TRACKFILE_COLS – The column names
TRACKFILE_FMTS – The entry formats
TRACKFILE_CNVT – The column converters</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trackfile</strong> (<em>str</em>) – the track data filename.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>track data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.tracks2shp">
<span id="utilities-tracks2shp-module"></span><h2>Utilities.tracks2shp module<a class="headerlink" href="#module-Utilities.tracks2shp" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-tracks2shp">
<span id="tracks2shp-save-a-track-instance-as-a-shape-file"></span><h3><a class="reference internal" href="#module-tracks2shp" title="tracks2shp: Writes track instances to a shape file as a collection of line, ployline or point features."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracks2shp</span></code></a> – save a track instance as a shape file<a class="headerlink" href="#module-tracks2shp" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.tracks2shp.add_category">
<code class="sig-name descname">add_category</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tracks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tracks2shp.add_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a category field (for central pressure) to the tracks.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.tracks2shp.add_field">
<code class="sig-name descname">add_field</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">descr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tracks2shp.add_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a field to the description of a track.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.tracks2shp.recdropfields">
<code class="sig-name descname">recdropfields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rec</span></em>, <em class="sig-param"><span class="n">names</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tracks2shp.recdropfields" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new numpy record array with fields in <em>names</em> dropped.
From <a class="reference external" href="http://matplotlib.org/api/mlab_api.html#matplotlib.mlab.rec_drop_fields">http://matplotlib.org/api/mlab_api.html#matplotlib.mlab.rec_drop_fields</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rec</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.recarray</span></code> containing a number of fields.</p></li>
<li><p><strong>names</strong> (<em>list</em>) – List of names to drop from the record array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.recarray</span></code> with the fields in <em>names</em>
dropped.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.tracks2shp.tracks2line">
<code class="sig-name descname">tracks2line</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tracks</span></em>, <em class="sig-param"><span class="n">outputFile</span></em>, <em class="sig-param"><span class="n">dissolve</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">netcdf_format</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tracks2shp.tracks2line" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes tracks to a shapefile as a collection of line features</p>
<p>If dissolve==True, then each track feature is written as a
single polyline feature, otherwise each track segment is
stored as a separate feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tracks</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects) – <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> features to store in a shape file</p></li>
<li><p><strong>outputFile</strong> (<em>str</em>) – Path to output file destination</p></li>
<li><p><strong>dissolve</strong> (<em>boolean</em>) – Store track features or track segments.</p></li>
<li><p><strong>netcdf_format</strong> (<em>bool</em>) – Whether tracks are in TCRM format</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">shapefile.ShapefileException</span></code> if there is an error
when attempting to save the file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.tracks2shp.tracks2point">
<code class="sig-name descname">tracks2point</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tracks</span></em>, <em class="sig-param"><span class="n">outputFile</span></em>, <em class="sig-param"><span class="n">netcdf_format</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tracks2shp.tracks2point" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes tracks to a shapefile as a collection of point features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tracks</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> objects) – <code class="xref py py-class docutils literal notranslate"><span class="pre">Track</span></code> features to store in a shape file</p></li>
<li><p><strong>outputFile</strong> (<em>str</em>) – Path to output file destination</p></li>
<li><p><strong>netcdf_format</strong> (<em>bool</em>) – Whether tracks are in TCRM format</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">shapefile.ShapefileException</span></code> if there is an error
when attempting to save the file.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.tsmultipliers">
<span id="utilities-tsmultipliers-module"></span><h2>Utilities.tsmultipliers module<a class="headerlink" href="#module-Utilities.tsmultipliers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-tsmultipliers">
<span id="tsmultipliers-apply-site-exposure-multipliers-to-time-series-output"></span><h3><a class="reference internal" href="#module-tsmultipliers" title="tsmultipliers: Multiply the wind speed in a timeseries file by the appropriate multiplier values. Still a very rudimentary process."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tsmultipliers</span></code></a> – apply site-exposure multipliers to time series output<a class="headerlink" href="#module-tsmultipliers" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.tsmultipliers.process_timeseries">
<code class="sig-name descname">process_timeseries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tsmultipliers.process_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a set of timeseries files to include the multiplier values.</p>
<p>The combined multiplier values are stored in a shape file as fields,
and records are keyed by the same code that is used to select
stations for sampling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> (<em>str</em>) – Path to a configuration file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.tsmultipliers.startup">
<code class="sig-name descname">startup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tsmultipliers.startup" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse command line arguments and call the <code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code> function.</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.tsmultipliers.tsmultiply">
<code class="sig-name descname">tsmultiply</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inputFile</span></em>, <em class="sig-param"><span class="n">multipliers</span></em>, <em class="sig-param"><span class="n">outputFile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.tsmultipliers.tsmultiply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply multipliers to a single file. Values are combined then written
back to the source file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputFile</strong> (<em>str</em>) – Path to the input timeseries file. This will need
to contain the values of the three multipliers
(topography, terrain and shielding) for each of
eight directions.</p></li>
<li><p><strong>multipliers</strong> (<em>tuple</em>) – The eight combined multiplier values for the
location.</p></li>
<li><p><strong>outputFile</strong> (<em>str</em>) – Destination for the processed file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The records corresponding to the maximum (localised) wind speed
and minimum pressure.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.version">
<span id="utilities-version-module"></span><h2>Utilities.version module<a class="headerlink" href="#module-Utilities.version" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-version">
<span id="version-provide-details-of-software-version"></span><h3><a class="reference internal" href="#module-version" title="version: Provide ways to determine the version of the currently executing code."><code class="xref py py-mod docutils literal notranslate"><span class="pre">version</span></code></a> – provide details of software version<a class="headerlink" href="#module-version" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="Utilities.version.git">
<code class="sig-name descname">git</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">command</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.version.git" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the given command with git</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<em>str</em>) – A valid git command.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output from the given command.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.version.status">
<code class="sig-name descname">status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.version.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Check status TCRM of code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A message containing a listing of recent
changes to the model code.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Utilities.version.version">
<code class="sig-name descname">version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.version.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check version of TCRM code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Current git commit hash and the date/time
of the commit.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess.CalledProcessError</span></code> if the git
command fails.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This requires <code class="docutils literal notranslate"><span class="pre">git</span></code> to be installed to execute.</p>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-Utilities.vorticity">
<span id="utilities-vorticity-module"></span><h2>Utilities.vorticity module<a class="headerlink" href="#module-Utilities.vorticity" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="Utilities.vorticity.absolute">
<code class="sig-name descname">absolute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u</span></em>, <em class="sig-param"><span class="n">v</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.vorticity.absolute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="Utilities.vorticity.can_use_sphere">
<code class="sig-name descname">can_use_sphere</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">longitude</span></em>, <em class="sig-param"><span class="n">latitude</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.vorticity.can_use_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if can use sphere package.</p>
<dl class="simple">
<dt>Calling Sequence:</dt><dd><p>Result = can_use_sphere(longitude, latitude)</p>
</dd>
</dl>
<p>Note that Result is a 3-element tuple, not a scalar.  See the
description below for details.</p>
<p>Test if the longitude-latitude domain and Python package configur-
ation allows use of the NCAR SPHEREPACK 3.0 package.  Specifically 
the function tests:</p>
<ol class="arabic simple">
<li><p>Can you import sphere?</p></li>
<li><p>Is the longitude vector evenly spaced?</p></li>
<li><p>Does the longitude vector entirely span the globe, but doesn’t
repeat?</p></li>
<li><p>Is the latitude vector gaussian?  If not, is it evenly spaced 
and includes the poles?</p></li>
</ol>
<p>If the answer to (1) is no, then there’s no use to go through the 
other tests and the function return tuple element [0] is 0.  If (2) 
or (3) is no, return tuple element [0] is 0.  If (4) is both not 
gaussian and not evenly spaced with the poles, return tuple 
element [0] is 0.  Otherwise, return tuple element [0] is 1.  Note 
that (4) uses the latitude checker in the sphere package.</p>
<p>Method Arguments:
* longitude:  Vector of longitudes of the domain [deg].  Can be</p>
<blockquote>
<div><p>in any order, and a Numeric array or regular list/tuple.</p>
</div></blockquote>
<ul class="simple">
<li><p>latitude:  Vector of latitudes of the domain [deg].  Can be in
any order, and a Numeric array or regular list/tuple.</p></li>
</ul>
<p>Output Result:
* A 3-element tuple:</p>
<blockquote>
<div><dl class="simple">
<dt>[0]:  1 if the longitude-latitude domain and Python package </dt><dd><p>configuration passes tests to allow use of the NCAR 
SPHEREPACK 3.0 package.  0 if does not pass those tests.</p>
</dd>
<dt>[1]:  String containing messages written to stdout by calls to </dt><dd><p>module sphere used for checking latitude (e.g. if it is
gaussian, etc.).  If there are no messages or there were 
no calls needed to sphere for checking latitude, value is 
empty string.</p>
</dd>
</dl>
<p>[2]:  Same as [1] except contains stderr messages.</p>
</div></blockquote>
<p>Examples:
&gt;&gt;&gt; from can_use_sphere import can_use_sphere
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; lon = np.arange(36)*10
&gt;&gt;&gt; lat = [-90, -60, -30, 0, 30, 60, 90]
&gt;&gt;&gt; can_use_sphere(lon, lat)[0]
1
&gt;&gt;&gt; lat = [-90, -60, -30, 0, 30, 60, 87]
&gt;&gt;&gt; can_use_sphere(lon, lat)[0]
0
&gt;&gt;&gt; can_use_sphere(lon, lat)[1].splitlines()[1]
‘CANNOT PROCESS THE DATA - Latitude values are incorrect’</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.vorticity.curl_2d">
<code class="sig-name descname">curl_2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">Fx</span></em>, <em class="sig-param"><span class="n">Fy</span></em>, <em class="sig-param"><span class="n">missing</span><span class="o">=</span><span class="default_value">1e+20</span></em>, <em class="sig-param"><span class="n">algorithm</span><span class="o">=</span><span class="default_value">'default'</span></em>, <em class="sig-param"><span class="n">R_sphere</span><span class="o">=</span><span class="default_value">6371220.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.vorticity.curl_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Curl of a vector F on a 2-D “rectangular” grid.</p>
<p>The 2-D grid F is defined on is rectangular, meaning that while
the grid spacings do not have to be even, each grid box is
rectangular and grid boundaries are rectilinear and parallel to
each other.  If the 2-D grid is on a sphere, we assume that lines
of constant longitude and latitude form grids that are rectangular
(though in reality this is not strictly true).</p>
<p>Since F does not have a z-component, the curl of F is positive
pointing as a normal out of the plane defined by the basis for 
x and y.</p>
<p>Positional Input Arguments:
* x:  x-coordinate of each F.  1-D Numeric array with number of</p>
<blockquote>
<div><p>elements equal to the number of columns in array F.  Typically 
x is in km, or on a sphere the longitude in deg.  Floating or
integer type.</p>
</div></blockquote>
<ul class="simple">
<li><p>y:  y-coordinate of each F.  1-D Numeric array with number of 
elements equal to the number of rows in array F.  Typically 
y is in km, or on a sphere the latitude in deg.  Floating or
integer type.</p></li>
<li><p>Fx:  x-component of vector quantity F.  2-D Numeric array of 
shape (len(y), len(x)).  Floating or integer type.</p></li>
<li><p>Fy:  y-component of vector quantity F.  2-D Numeric array of 
same shape and size as Fx.  Floating or integer type.</p></li>
</ul>
<p>Keyword Input Arguments:
* missing:  If Fx and/or Fy has missing values, this is the</p>
<blockquote>
<div><p>missing value value.  Scalar.  Default is 1e+20.</p>
</div></blockquote>
<ul>
<li><p>algorithm:  Name of the algorithm to use.  String scalar.
Default is ‘default’.  Possible values include:</p>
<ul>
<li><p>‘default’:  Default method.  Algorithm ‘order1_cartesian’ 
is used.</p></li>
<li><p>‘default_spherical’:  If ‘spherepack’ can be used, chooses
that method.  Otherwise ‘order1_spherical’ is used.  Either
way this option assumes the domain is on a sphere of radius
equal to keyword R_sphere.</p></li>
<li><p>‘order1_cartesian’:  First-order finite-differencing (back-
ward and forward differencing used at the endpoints, and 
centered differencing used everywhere else).  If abscissa 
intervals are irregular, differencing will be correspon-
dingly asymmetric.  Grid is assumed Cartesian.  The curl
returned is in units of F divided by the units of x and y
(x and y must be in the same units).</p></li>
<li><p>‘order1_spherical’:  First-order finite-differencing (back-
ward and forward differencing used at the endpoints, and 
centered differencing used everywhere else).  If abscissa 
intervals are irregular, differencing will be correspon-
dingly asymmetric.  Grid is assumed spherical and x and y
are longitude and latitude (in deg).  The curl returned is 
in units of F divided by units of R_sphere.  Note because
of singularities in the algorithm near the poles, the
curl for all points north of 88N or south of 88S latitude 
are set to missing.</p></li>
<li><p>‘spherepack’:  The NCAR package SPHEREPACK 3.0 is used for 
calculating the curl.  The spatial domain is the global 
sphere; x and y are longitude and latitude (in deg), 
respectively; x must be evenly spaced and y must be gauss-
ian or evenly spaced.  The domain must cover the entire 
sphere and x and y must be longitude and latitude, respec-
tively, in deg.  There can be no missing values.  The 
algorithm also assumes that x and y are monotonically in-
creasing from index 0.  The curl returned is in units of F 
divided by m.  Thus, if F is velocity in m/s, the curl of 
F is in units 1/s (and is the vorticity).  Note that in 
this function’s implementation, the final curl output using 
algorithm ‘spherepack’ is adjusted for R_sphere not equal 
to the default mean earth radius, if appropriate, so this 
algorithm can be used on other planets.</p>
<p>Note that SPHEREPACK operates on single precision floating
point (Float32) values.  This function silently converts
input to Float32 for the computations, as needed (the input 
parameters are not altered, however).</p>
</li>
</ul>
</li>
<li><p>R_sphere:  If the grid is the surface of a sphere, this is 
the radius of the sphere.  This keyword is only used when 
the algorithm is ‘order1_spherical’ or ‘spherepack’ (either 
chosen explicitly by the algorithm keyword or automatically 
when ‘default_spherical’ is used).  Default value is the 
“mean” radius of the Earth, in meters.  “Mean” is in quotes
because this value changes depending on what you consider the
mean; the default in this function is the same Earth radius
used in module sphere.  Note that if the level is a distance 
z above the “mean” radius of the earth, R_sphere should be 
set to the “mean” radius plus z.</p>
<p>Value can be a scalar or a Numeric or MA array of the same 
size and shape as Fx.  If keyword is an array, the value of
R_sphere for each element corresponds to the same location
as in the Fx and Fy arrays; there should also be no missing 
values in R_sphere (function doesn’t check for this, however).</p>
</li>
</ul>
<p>Output:
* Curl of F.  Units depend on algorithm used to calculate curl</p>
<blockquote>
<div><p>(see above discussion of keyword algorithm).  Numeric array of 
same shape as Fx and Fy inputs.</p>
<p>If there are missing values, those elements in the output that 
used missing values in the calculation of the curl are set to 
the value in keyword missing.  If there are missing values in 
the output due to math errors and keyword missing is set to 
None, output will fill those missing values with the MA default 
value of 1e+20.</p>
</div></blockquote>
<p>References:
* Glickman, T. S. (Ed.) (2000):  “Curl,” Glossary of Meteorology,</p>
<blockquote>
<div><p>Boston, MA:  American Meteorological Society, ISBN 1-878220-
34-9.</p>
</div></blockquote>
<ul>
<li><p>Haltiner, G. J, and R. T. Williams (1980):  Numerical Prediction
and Dynamic Meteorology, New York:  John Wiley &amp; Sons, pp. 8-9.</p></li>
<li><p>Holton, J. R. (1992):  An Introduction to Dynamic Meteorology,
San Diego, CA:  Academic Press, p. 482.</p></li>
<li><p>Kauffman, B. G., and W. G. Large (2002):  The CCSM Coupler,
Version 5.0, User’s Guide, Source Code Reference, and Scientific
Description.  Boulder, CO:  NCAR.  Value for earth radius is 
given at URL:
<a class="reference external" href="http://www.ccsm.ucar.edu/models/ccsm2.0/cpl5/users_guide/node10.html">http://www.ccsm.ucar.edu/models/ccsm2.0/cpl5/users_guide/node10.html</a></p></li>
<li><p>Overview of the CDAT Interface to the NCAR SPHEREPACK 3.0.  
SPHEREPACK is by J. C. Adams and P. N. Swarztrauber.  More
information on SPHEREPACK can be found at:</p>
<blockquote>
<div><p><a class="reference external" href="http://www.scd.ucar.edu/css/software/spherepack/">http://www.scd.ucar.edu/css/software/spherepack/</a></p>
</div></blockquote>
<dl class="simple">
<dt>while information on the CDAT implementation used here is at:</dt><dd><p><a class="reference external" href="http://esg.llnl.gov/cdat/getting_started/cdat.htm">http://esg.llnl.gov/cdat/getting_started/cdat.htm</a></p>
</dd>
</dl>
</li>
</ul>
<p>Example of a synthetic dataset of winds.  The curl is the vorti-
city.  Images of the wind field and the vorticity are online at
<a class="reference external" href="http://www.johnny-lin.com/py_pkgs/gemath/doc/test_curl_2d_add.html">http://www.johnny-lin.com/py_pkgs/gemath/doc/test_curl_2d_add.html</a>.
Velocity at y greater than 60 and less than -60 are set to 0, to
prevent spectral algorithms from giving errors at the poles.  Tiny 
values less than 1e-10 are also set to 0:</p>
<ol class="loweralpha simple">
<li><p>Import statements and create data:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">Numeric</span> <span class="k">as</span> <span class="nn">N</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">curl_2d</span> <span class="kn">import</span> <span class="n">curl_2d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nx</span> <span class="o">=</span> <span class="mi">181</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ny</span> <span class="o">=</span> <span class="mi">91</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nx</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">180.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ny</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">90.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_2d</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span> <span class="n">N</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">nx</span><span class="p">),</span> <span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_2d</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span> <span class="n">N</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">N</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">x</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="n">nx</span><span class="p">)),</span> <span class="n">ny</span><span class="p">),</span> <span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x_2d</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.</span><span class="p">)</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">sin</span><span class="p">((</span><span class="n">y_2d</span><span class="o">-</span><span class="mf">90.</span><span class="p">)</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">30.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">sin</span><span class="p">((</span><span class="n">x_2d</span><span class="o">-</span><span class="mf">30.</span><span class="p">)</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.</span><span class="p">)</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">sin</span><span class="p">((</span><span class="n">y_2d</span><span class="o">-</span><span class="mf">90.</span><span class="p">)</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">30.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N</span><span class="o">.</span><span class="n">putmask</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">N</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N</span><span class="o">.</span><span class="n">putmask</span><span class="p">(</span> <span class="n">v</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">N</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N</span><span class="o">.</span><span class="n">putmask</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">N</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">y_2d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">60.</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N</span><span class="o">.</span><span class="n">putmask</span><span class="p">(</span> <span class="n">v</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">N</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">y_2d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">60.</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.</span> <span class="p">)</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="2">
<li><p>Use order 1 Cartesian algorithm:  If x and y are in meters,
and u and v are in m/s, the curl is in 1/s:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span> <span class="o">=</span> <span class="n">curl_2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;order1_cartesian&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span><span class="mi">92</span><span class="p">)]</span>
<span class="go">[&#39;-0.007251593&#39;, &#39;-0.003628007&#39;, &#39;0&#39;, &#39;0.003628007&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">12</span><span class="p">)]</span>
<span class="go">[&#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;]</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="3">
<li><p>Use spectral method from SPHEREPACK (need to first remove the
repeating dateline point from the domain).  Here we take x and
y in deg, while u and v are in m/s.  If so the curl is in 1/s.
These results as much less than for example (b) above since
the domain is much larger:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">u</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span> <span class="o">=</span> <span class="n">curl_2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;spherepack&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span><span class="mi">92</span><span class="p">)]</span>
<span class="go">[&#39;-6.436402e-08&#39;, &#39;-3.220152e-08&#39;, &#39;1.33852e-13&#39;, &#39;3.220165e-08&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">12</span><span class="p">)]</span>
<span class="go">[&#39;-2.299736e-20&#39;, &#39;-4.806512e-21&#39;, &#39;-9.283145e-22&#39;, &#39;-1.368445e-20&#39;]</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="4">
<li><p>Use order 1 spherical algorithm:  x and y are in deg and u and
v are in m/s.  The curl is in 1/s.  Note that these results are
nearly identical to those from SPHEREPACK, except near the poles
the values are set to missing:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span> <span class="o">=</span> <span class="n">curl_2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;order1_spherical&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span><span class="mi">92</span><span class="p">)]</span>
<span class="go">[&#39;-6.517317e-08&#39;, &#39;-3.260645e-08&#39;, &#39;0&#39;, &#39;3.260645e-08&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">12</span><span class="p">)]</span>
<span class="go">[&#39;1e+20&#39;, &#39;1e+20&#39;, &#39;1e+20&#39;, &#39;1e+20&#39;]</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="5">
<li><p>Use “default” algorithm, which for this domain chooses the 
order 1 cartesian algorithm:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span> <span class="o">=</span> <span class="n">curl_2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span><span class="mi">92</span><span class="p">)]</span>
<span class="go">[&#39;-0.007251593&#39;, &#39;-0.003628007&#39;, &#39;0&#39;, &#39;0.003628007&#39;]</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="6">
<li><p>Use “default_spherical” algorithm with missing data (equal to
1e+20), which because of the missing data will choose the order
1 spherical algorithm.  We also do the calculation on Mars, and
illustrate passing in the radius as a constant as well as an
array of the same size and shape as u and v:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">46</span><span class="p">,</span><span class="mi">90</span><span class="p">:</span><span class="mi">114</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1e+20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span> <span class="o">=</span> <span class="n">curl_2d</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;default_spherical&#39;</span>                       <span class="p">,</span> <span class="n">R_sphere</span><span class="o">=</span><span class="mf">3390e+3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span><span class="mi">92</span><span class="p">)]</span>
<span class="go">[&#39;-1.224875e-07&#39;, &#39;-6.128107e-08&#39;, &#39;1e+20&#39;, &#39;1e+20&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">R_mars</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">typecode</span><span class="o">=</span><span class="n">N</span><span class="o">.</span><span class="n">Float</span><span class="p">)</span> <span class="o">+</span> <span class="mf">3390e+3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span> <span class="o">=</span> <span class="n">curl_2d</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;default_spherical&#39;</span>                       <span class="p">,</span> <span class="n">R_sphere</span><span class="o">=</span><span class="n">R_mars</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%.7g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">curl</span><span class="p">[</span><span class="mi">45</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span><span class="mi">92</span><span class="p">)]</span>
<span class="go">[&#39;-1.224875e-07&#39;, &#39;-6.128107e-08&#39;, &#39;1e+20&#39;, &#39;1e+20&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="Utilities.vorticity.deriv">
<code class="sig-name descname">deriv</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.vorticity.deriv" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the derivative along a single dimension.</p>
<dl class="simple">
<dt>Calling Sequence:</dt><dd><p>Result = deriv([x_in,] y_in, missing=1e+20, algorithm=’default’)</p>
</dd>
</dl>
<p>Positional Input Arguments:
* x_in:  Abscissa values of y_in to take with respect to.  If</p>
<blockquote>
<div><p>not set, the derivative of y_in is take with respect to unit 
abscissa intervals.  Numeric array of same shape and size as 
y_in.  Must be monotonic and with no duplicate values.
Optional.  First positional argument out of two, if present.</p>
</div></blockquote>
<ul class="simple">
<li><p>y_in:  Ordinate values, to take the derivative with respect 
to.  Numeric array vector of rank 1.  Required.  Second posi-
tional argument, if x_in is present; only positional argument 
if x_in is absent.</p></li>
</ul>
<p>Keyword Input Arguments:
* missing:  If y_in and/or x_in has missing values, this is the</p>
<blockquote>
<div><p>missing value value.  Scalar.  Default is 1e+20.</p>
</div></blockquote>
<ul>
<li><p>algorithm:  Name of the algorithm to use.  String scalar.
Default is ‘default’.  Possible values include:
+ ‘default’:  Default method (currently set to ‘order1’).
+ ‘order1’:  First-order finite-differencing (backward and</p>
<blockquote>
<div><p>forward differencing used at the endpoints, and centered
differencing used everywhere else).  If abscissa intervals
are irregular, differencing will be correspondingly asym-
metric.</p>
</div></blockquote>
</li>
</ul>
<p>Output Result:
* Derivative of y_in with respect to x_in (or unit interval</p>
<blockquote>
<div><p>abscissa, if x_in is not given).  Numeric array of same shape 
and size as y_in.  If there are missing values, those elements 
in the output are set to the value in <a href="#id5"><span class="problematic" id="id6">|missing|</span></a>.  For instance, 
if y_in is only one element, a one-element vector is returned 
as the derivative with the value of <a href="#id7"><span class="problematic" id="id8">|missing|</span></a>.  If there are 
missing values in the output due to math errors and <a href="#id9"><span class="problematic" id="id10">|missing|</span></a> 
is set to None, output will fill those missing values with the 
MA default value of 1e+20.</p>
</div></blockquote>
<p>References:
* Press, W. H., et al. (1992):  Numerical Recipes in Fortran</p>
<blockquote>
<div><p>77:  The Art of Scientific Computing.  New York, NY:  Cambridge
University Press, pp. 180-184.</p>
</div></blockquote>
<ul class="simple">
<li><p>Wang, Y. (1999):  “Numerical Differentiation,” Introduction to 
MHD Numerical Simulation in Space, ESS265: Instrumentation, 
Data Processing and Data Analysis in Space Physics (UCLA).
URL:  <a class="reference external" href="http://www-ssc.igpp.ucla.edu/personnel/russell/ESS265/">http://www-ssc.igpp.ucla.edu/personnel/russell/ESS265/</a>
Ch10/ylwang/node21.html.</p></li>
</ul>
<p>Example with one argument, no missing values, using the default
method:
&gt;&gt;&gt; from deriv import deriv
&gt;&gt;&gt; import Numeric as N
&gt;&gt;&gt; y = N.sin(N.arange(8))
&gt;&gt;&gt; dydx = deriv(y)
&gt;&gt;&gt; [‘%.7g’ % dydx[i] for i in range(4)]
[‘0.841471’, ‘0.4546487’, ‘-0.3501755’, ‘-0.83305’]
&gt;&gt;&gt; true = N.cos(N.arange(8))  #- Compare with exact solution
&gt;&gt;&gt; [‘%.7g’ % true[i] for i in range(4)]  
[‘1’, ‘0.5403023’, ‘-0.4161468’, ‘-0.9899925’]</p>
<p>Example with two arguments with missing values, using first-
order differencing:
&gt;&gt;&gt; x = N.arange(8)/(2.*N.pi)
&gt;&gt;&gt; y = N.sin(x)
&gt;&gt;&gt; y[3] = 1e20            #- Set an element to missing value
&gt;&gt;&gt; dydx = deriv(x, y, missing=1e20, algorithm=’order1’)
&gt;&gt;&gt; [‘%.7g’ % dydx[i] for i in range(5)]
[‘0.9957836’, ‘0.9831985’, ‘1e+20’, ‘0.8844179’, ‘1e+20’]
&gt;&gt;&gt; true = N.cos(x)       #- Compare with exact solution
&gt;&gt;&gt; [‘%.7g’ % true[i] for i in range(5)]  
[‘1’, ‘0.9873616’, ‘0.9497657’, ‘0.8881628’, ‘0.8041098’]</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.vorticity.has_close">
<code class="sig-name descname">has_close</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">rtol</span><span class="o">=</span><span class="default_value">1e-05</span></em>, <em class="sig-param"><span class="n">atol</span><span class="o">=</span><span class="default_value">1e-08</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.vorticity.has_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if data has any values “equal” to value.</p>
<p>Returns 1 if any of the elements of argument data has a value 
“equal” to argument value; returns 0 otherwise.  If data or value
is floating point, “equal” means where abs(data-value) &lt;= atol + 
rtol * abs(value).  This is essentially the same algorithm used 
in the Numeric function allclose.  If data and value are integer,
“equal” means strict equality.</p>
<p>Positional Input Arguments:
* data:   Data.  Scalar or Numeric array, Python list/tuple of</p>
<blockquote>
<div><p>any size and shape.  Floating or integer type.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>value:  Test value.  Scalar or 1 element Numeric array, list,</dt><dd><p>or tuple.  Floating or integer type.</p>
</dd>
</dl>
</li>
</ul>
<p>Keyword Input Arguments:
* rtol:   “Relative” tolerance.  Default is 1.e-5.  Used in the</p>
<blockquote>
<div><p>comparison between data and value only if the two are 
floating point.  Floating or integer type.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>atol:   “Absolute” tolerance.  Default is 1.e-8.  Used in the</dt><dd><p>comparison between data and value only if the two are 
floating point.  Floating or integer type.</p>
</dd>
</dl>
</li>
</ul>
<p>Examples:
&gt;&gt;&gt; from has_close import has_close
&gt;&gt;&gt; data = [20., -32., -1., 2., 5., 29.]
&gt;&gt;&gt; has_close(data, -1.)
1
&gt;&gt;&gt; has_close(data, 10.)
0</p>
</dd></dl>

<dl class="py function">
<dt id="Utilities.vorticity.relative">
<code class="sig-name descname">relative</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">u</span></em>, <em class="sig-param"><span class="n">v</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Utilities.vorticity.relative" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Commonwealth of Australia (Geoscience Australia) 2020
      <span class="lastupdated">
        Last updated on Nov 02, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>